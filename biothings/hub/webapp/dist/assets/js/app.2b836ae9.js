(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],u=0,_=[];u<r.length;u++)o=r[u],s[o]&&_.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(_.length)_.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},n=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("93a4"),s=a.n(i);s.a},"0530":function(t,e,a){"use strict";var i=a("9704"),s=a.n(i);s.a},"08fb":function(t,e,a){},"0e14":function(t,e,a){},"11ae":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui inverted segment",staticStyle:{overflow:"auto",width:"50vw","max-height":"33vh","max-width":"50vw"},attrs:{id:"logviewer"}},[t.records.length?a("table",{staticClass:"ui single line super compact inverted table"},[a("tbody",t._l(t.records,function(t){return a("log-record",{attrs:{record:t}})}),1)]):a("div",[t._v("\n        No logs yet...\n    ")])])},s=[],n=(a("bc3a"),a("f5ef")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"record"},[a("td",{staticClass:"ts"},[t._v(t._s(t.ts))]),a("td",{staticClass:"logger"},[t._v(t._s(t.record.logger))]),a("td",{class:t.level},[t._v(t._s(t.record.msg))])])},r=[],c=(a("a481"),{name:"log-record",props:["record"],computed:{level:function(){return"level-"+this.record.level.toLowerCase()},ts:function(){return this.record.ts.replace(/\..*/,"")}}}),l=c,d=(a("fa28"),a("0c7c")),u=Object(d["a"])(l,o,r,!1,null,"41b41bbd",null),_=u.exports,p=1e3,m={name:"log-viewer",props:[],components:{LogRecord:_},mounted:function(){console.log("LogViewer mounted")},created:function(){n["a"].$on("log",this.onLog)},beforeDestroy:function(){n["a"].$off("log",this.onLog)},ready:function(){},data:function(){return{records:[]}},watch:{},methods:{onLog:function(t){this.records.push(t);while(this.records.length>p)this.records.shift();var e=$("#logviewer");e.scrollTop(e.prop("scrollHeight"))}}},f=m,v=(a("3f5c"),Object(d["a"])(f,i,s,!1,null,null,null));e["a"]=v.exports},"11df":function(t,e,a){t.exports=a.p+"assets/img/biothings-studio-color.ef9c10ce.svg"},"148b":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("aef6"),core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_string_starts_with__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("f559"),core_js_modules_es6_string_starts_with__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_string_starts_with__WEBPACK_IMPORTED_MODULE_6__),_Users_slelong_Documents_Projects_biothings_api_biothings_hub_webapp_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("7618"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__),axios__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_10__),urijs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("c909"),urijs__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(urijs__WEBPACK_IMPORTED_MODULE_11__),regenerator_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("96cf"),regenerator_runtime__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(regenerator_runtime__WEBPACK_IMPORTED_MODULE_12__),vue_localstorage__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("ead5"),vue_localstorage__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(vue_localstorage__WEBPACK_IMPORTED_MODULE_13__),_Loader_vue__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("3361"),vue2_filters__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("a7c6"),vue2_filters__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(vue2_filters__WEBPACK_IMPORTED_MODULE_15__),vue_router__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("8c4f"),vue__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("2b0e"),_bus_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("f5ef"),lodash__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("1959"),lodash__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_19__),_JobSummary_vue__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("669c"),_Status_vue__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("55dc"),_DataSourceGrid_vue__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("d3ef"),_DataSourceDetailed_vue__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("68b8"),_BuildGrid_vue__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("23f1"),_BuildDetailed_vue__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("562c"),_ApiGrid_vue__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("cadf5"),_EventMessages_vue__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("ed20"),_EventAlert_vue__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("38c9"),_ChooseHub_vue__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("bc6b"),_LogViewer_vue__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("11ae");vue__WEBPACK_IMPORTED_MODULE_17__["a"].use(vue_localstorage__WEBPACK_IMPORTED_MODULE_13___default.a),vue__WEBPACK_IMPORTED_MODULE_17__["a"].use(vue2_filters__WEBPACK_IMPORTED_MODULE_15___default.a),vue__WEBPACK_IMPORTED_MODULE_17__["a"].use(__webpack_require__("2ead")),vue__WEBPACK_IMPORTED_MODULE_17__["a"].use(vue_router__WEBPACK_IMPORTED_MODULE_16__["a"]);var STUDIO_VERSION="0.2a";function timesofar(t){var e=parseInt(Math.floor(t/3600)),a=parseInt(Math.floor((t-3600*e)/60)),i=parseInt((t-(3600*e+60*a))%60),s=e>9?e:"0"+e,n=a>9?a:"0"+a,o=i>9?i:"0"+i,r="";return e&&(r+=s+"h"),a&&(r+=n+"m"),i&&(r+=o+"s"),r}vue__WEBPACK_IMPORTED_MODULE_17__["a"].filter("timesofar",timesofar);var UNITS=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],STEP=1024;function pretty_size(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=["bytes","KB","MB","GB","TB","PB"];if(isNaN(parseFloat(t))||!isFinite(t))return"?";var i=0;while(t>=1024)t/=1024,i++;return t.toFixed(+e)+" "+a[i]}function split_and_join(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.split(e).join(" ")}function jsonstr(t){return JSON.stringify(t)}vue__WEBPACK_IMPORTED_MODULE_17__["a"].filter("pretty_size",pretty_size),vue__WEBPACK_IMPORTED_MODULE_17__["a"].filter("splitjoin",split_and_join),vue__WEBPACK_IMPORTED_MODULE_17__["a"].filter("json",jsonstr);var numeral=__webpack_require__("6612");numeral.register("locale","mine",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"thousand",million:"million",billion:"billion",trillion:"trillion"}}),numeral.locale("mine"),vue__WEBPACK_IMPORTED_MODULE_17__["a"].filter("formatNumber",function(t){return numeral(t).format("0.00 a")}),vue__WEBPACK_IMPORTED_MODULE_17__["a"].filter("replace",function(t,e,a){return t.replace(e,a)});var routes=[{path:"/",component:_Status_vue__WEBPACK_IMPORTED_MODULE_21__["a"]},{path:"/sources",component:_DataSourceGrid_vue__WEBPACK_IMPORTED_MODULE_22__["a"]},{path:"/source/:_id",component:_DataSourceDetailed_vue__WEBPACK_IMPORTED_MODULE_23__["a"],props:!0},{path:"/builds",component:_BuildGrid_vue__WEBPACK_IMPORTED_MODULE_24__["a"]},{path:"/build/:_id",component:_BuildDetailed_vue__WEBPACK_IMPORTED_MODULE_25__["a"],props:!0,name:"build"},{path:"/apis",component:_ApiGrid_vue__WEBPACK_IMPORTED_MODULE_26__["a"]}],router=new vue_router__WEBPACK_IMPORTED_MODULE_16__["a"]({routes:routes}),PING_INTERVAL_MS=1e4;__webpack_exports__["a"]={name:"app",router:router,components:{JobSummary:_JobSummary_vue__WEBPACK_IMPORTED_MODULE_20__["a"],EventMessages:_EventMessages_vue__WEBPACK_IMPORTED_MODULE_27__["a"],EventAlert:_EventAlert_vue__WEBPACK_IMPORTED_MODULE_28__["a"],ChooseHub:_ChooseHub_vue__WEBPACK_IMPORTED_MODULE_29__["a"],Loader:_Loader_vue__WEBPACK_IMPORTED_MODULE_14__["a"],LogViewer:_LogViewer_vue__WEBPACK_IMPORTED_MODULE_30__["a"]},mounted:function(){$("#conn").popup({on:"hover"}),$(".menu .item").tab(),$(".ui.sticky").sticky({context:"#page_content"}),$(".ui.utilssticky").sticky({context:"#app"});var t=vue__WEBPACK_IMPORTED_MODULE_17__["a"].localStorage.get("last_conn");this.conn=this.default_conn,t&&(this.conn=JSON.parse(t)),$(".terminal.item").popup({popup:$(".terminal.popup"),on:"click",closable:!1,position:"top left"}),$(".logs.item").popup({popup:$(".logs.popup"),on:"click",closable:!1,position:"top left",lastResort:"top right"}),this.setupConnection(),this.skip_studio_compat=vue__WEBPACK_IMPORTED_MODULE_17__["a"].localStorage.get("skip_studio_compat")},created:function(){console.log("App created"),_bus_js__WEBPACK_IMPORTED_MODULE_18__["a"].$on("reconnect",this.setupConnection),_bus_js__WEBPACK_IMPORTED_MODULE_18__["a"].$on("connect",this.setupConnection,null,"/"),this.conn=this.default_conn},beforeDestroy:function(){_bus_js__WEBPACK_IMPORTED_MODULE_18__["a"].$off("reconnect",this.setupConnection),_bus_js__WEBPACK_IMPORTED_MODULE_18__["a"].$off("connect",this.setupConnection)},data:function(){return{connected:!1,socket_msg:"",socket:null,msg_timestamp:null,latency_value:null,ping_interval:PING_INTERVAL_MS,default_conn:{icon:"/dist/biothings-studio-color.svg",name:"BioThings Studio",app_version:null,biothings_version:null,url:"http://localhost:7080"},conn:null,cancel_redirect:!1,redirect_url:null,required_studio_version:null,current_studio_version:STUDIO_VERSION,compat_urls:[],redirect_delay:5e3}},computed:{str_app_version:function(){return this.getVersionAsString(this.conn.app_version)},str_biothings_version:function(){return this.getVersionAsString(this.conn.biothings_version)}},watch:{latency_value:function(t,e){t!=e&&this.evalLatency(e,t)},conn:function(t,e){t!=e&&(this.conn.icon?$(".logo").attr("src",this.conn.icon):$(".logo").attr("src",this.default_conn.icon))}},methods:{getVersionAsString:function(t){try{return"object"==Object(_Users_slelong_Documents_Projects_biothings_api_biothings_hub_webapp_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_7__["a"])(t)?"".concat(t.branch," [").concat(t.commit,"] [").concat(t.date,"]"):t}catch(e){return null}},getCompatList:function(){try{var t=__webpack_require__("607a")}catch(e){console.log(e),console.log("Coulnd't find compat list");t=[]}return t},dispatchEvent:function(t){if("log"==t.op)_bus_js__WEBPACK_IMPORTED_MODULE_18__["a"].$emit("log",t);else if(t.obj){if(t.data&&t.data.msg.startsWith("{")&&t.data.msg.endsWith("}"))try{var e=JSON.parse(t.data.msg);if("alert"==e["type"])return void _bus_js__WEBPACK_IMPORTED_MODULE_18__["a"].$emit("alert",e);console.log("Unknown structured event type: ".concat(e["type"]))}catch(i){}var a="change_".concat(t.obj);console.log("dispatch event ".concat(a," (").concat(t._id,"): ").concat(t.op," [").concat(t.data,"]")),_bus_js__WEBPACK_IMPORTED_MODULE_18__["a"].$emit(a,t._id,t.op,t.data)}},evalLatency:function(t,e){var a={};function i(t){return null==t?(a["color"]="grey",a["quality"]="unknown"):t>0&&t<=20?(a["color"]="green",a["quality"]="excellent"):t>20&&t<=30?(a["color"]="olive",a["quality"]="good"):t>30&&t<=50?(a["color"]="yellow",a["quality"]="average"):t>50&&t<=100?(a["color"]="orange",a["quality"]="poor"):t>100?(a["color"]="red",a["quality"]="very poor"):(a["color"]="brown",a["quality"]="???"),a}i(t);var s=i(e);$("#connected i").removeClass("grey brown red orange yellow olive green").addClass(s.color),$("#connected").attr("data-tooltip","Quality: "+s.quality)},openConnection:function(){this.setupConnection(null,!1)},setupConnection:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=t&&(this.conn=t),/\/connect=/.test(window.location.hash)){var a=window.location.hash.replace(/.*\/connect=/,"");console.log("Connect from anchor hash: ".concat(a))}else{a=this.conn["url"].replace(/\/$/,"");console.log("Connecting to ".concat(this.conn.name," (").concat(a,")")),axios__WEBPACK_IMPORTED_MODULE_10___default.a.defaults.baseURL=a}this.refreshConnection(a),vue__WEBPACK_IMPORTED_MODULE_17__["a"].localStorage.set("last_conn",JSON.stringify(this.conn)),this.setupSocket(e)},checkCompat:function checkCompat(data){if("true"!=vue__WEBPACK_IMPORTED_MODULE_17__["a"].localStorage.get("skip_studio_compat")){var current_host_port=new urijs__WEBPACK_IMPORTED_MODULE_11___default.a(location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")),studio_roots=[current_host_port.toString()],remote_webapps=["https://studio.biothings.io"];vue__WEBPACK_IMPORTED_MODULE_17__["a"].localStorage.get("remote_webapps")&&(studio_roots=vue__WEBPACK_IMPORTED_MODULE_17__["a"].localStorage.get("remote_webapps"),Object(_Users_slelong_Documents_Projects_biothings_api_biothings_hub_webapp_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_7__["a"])(studio_roots)!==Array&&(studio_roots=[studio_roots])),Array.prototype.push.apply(studio_roots,remote_webapps),console.log("Studio webapp roots: ".concat(studio_roots));var self=this,compat=self.getCompatList();for(var i in compat){var when=compat[i]["when"];for(var k in when)if(data[k]){try{var vers=data[k].split(" ").map(function(t){var e=/\[(.*)\]/.exec(t);return e&&e[1]||t})}catch(e){var vers=[data[k]["branch"],data[k]["commit"],data[k]["date"]]}var branch=vers[0];switch(vers.length){case 2:var commit=vers[1],commitdate=null;break;case 3:var commit=vers[1],commitdate=vers[2];break;default:var commit=null,commitdate=null}var required_branch=when[k]["branch"],required_commit=when[k]["commit"],required_date=when[k]["date"];if(console.log("Hub run ".concat(k," branch:").concat(branch," commit:").concat(commit," commit-date:").concat(commitdate)),console.log("Checking compat branch:".concat(required_branch," commit:").concat(required_commit," commit-date:").concat(required_date)),required_branch==branch){if(required_commit){if(required_commit!=commit){console.log("Commit mismatch, need ".concat(required_commit," but got ").concat(commit));continue}console.log("Commits matches"),self.required_studio_version=compat[i]["requires"];break}if(required_date){if(!commitdate){console.log("Date compat needed but no commit date returned from Hub");continue}var interval=required_date.split(",");if(2==interval.length)var fromd=interval[0],tod=interval[1],dateok=evalDateCompat(fromd,commitdate)&&evalDateCompat(tod,commitdate);else var dateok=evalDateCompat(required_date,commitdate);if(dateok){console.log("Dates match"),self.required_studio_version=compat[i]["requires"];break}console.log("Date mismatch, need ".concat(required_date," but got ").concat(commitdate));continue}console.log("Branches match"),self.required_studio_version=compat[i]["requires"];break}console.log("Branch mismatch, need ".concat(required_branch," but got ").concat(branch))}if(self.required_studio_version)break;console.log("No match found or no required version specified")}if(self.required_studio_version){for(var idx in console.log("Selected compatible version ".concat(self.required_studio_version)),studio_roots){var root=studio_roots[idx];if(self.required_studio_version==this.current_studio_version)var uri=new urijs__WEBPACK_IMPORTED_MODULE_11___default.a(root);else var uri=new urijs__WEBPACK_IMPORTED_MODULE_11___default.a([root,self.required_studio_version].join("/"));uri.normalize();var url=uri.toString();self.compat_urls.push(url)}if(self.compat_urls){var checked=[];for(var i in self.compat_urls){var doFetch=function(t){fetch(self.compat_urls[t]).then(function(e){checked.push({url:self.compat_urls[t],valid:e.ok,order:t})})};console.log("Checking ".concat(self.compat_urls[i])),doFetch(i)}var poll_delay=500,max_iter=self.redirect_delay/500,count=0,inter=setInterval(function(){if(Object.keys(checked).length!=self.compat_urls.length)count++,console.log("Checking URL for compatible version ".concat(count,"/").concat(max_iter)),count>max_iter&&(console.log("Give up"),clearInterval(inter),$(".redirect.modal").modal("show"));else{console.log("All checked:"),console.log(checked),clearInterval(inter),self.cancel_redirect=!1,self.redirect_url=null;var t=checked.filter(function(t){return 1==t.valid}).sort(function(t,e){return t.order-e.order});if(!t.length)return console.log("No valid redirection, weird..."),void $(".redirect.modal").modal("show");if(self.redirect_url=t[0].url,self.redirect_url){if(current_host_port.toString()==self.redirect_url)return void console.log("Current Studio is compatible");$(".redirect.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){window.location.replace(self.redirect_url+window.location.hash)},onDeny:function(){self.cancel_redirect=!0}}).modal("show"),setTimeout(function(){self.cancel_redirect||(console.log("Redirecting to ".concat(self.compat_urls[i])),window.location.replace(self.redirect_url+window.location.hash))},self.redirect_delay)}}},poll_delay)}else console.log("Could not ensure compatibity")}else console.log("Couldn't find any suitable version, will keep current as failover")}else console.log("Skip Studio version compatibility, as instructed in local storage");function evalDateCompat(refd,d){var res=/^\D+/.exec(refd),op=null;if(res){var op=res[0];refd=refd.slice(op.length)}else var op="===";var jsd=new Date(d),jsrefd=new Date(refd);console.log("eval: ".concat(jsd," ").concat(op," ").concat(jsrefd));var exp=String.prototype.concat("+jsd ",op," +jsrefd"),isok=eval(String.prototype.concat("+jsd ",op," +jsrefd"));return isok}},refreshConnection:function(t){var e=this;axios__WEBPACK_IMPORTED_MODULE_10___default.a.get(t).then(function(a){console.log(a.data.result),e.checkCompat(a.data.result),e.conn=a.data.result,e.conn["url"]=t}).catch(function(t){console.log(t),console.log("Error creating new connection: "+t.data.error)})},setupSocket:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this,i=null;this.msg_timestamp=null,axios__WEBPACK_IMPORTED_MODULE_10___default.a.get(axios__WEBPACK_IMPORTED_MODULE_10___default.a.defaults.baseURL+"/ws/info").then(function(s){console.log("WebSocket available"),t.socket=new SockJS(axios__WEBPACK_IMPORTED_MODULE_10___default.a.defaults.baseURL+"/ws",i),t.socket.onopen=function(){a.connected=!0,this.ping_interval=PING_INTERVAL_MS,a.pingServer(),e&&window.location.assign(e)},t.socket.onmessage=function(t){var e=Date.now();a.latency_value=e-a.msg_timestamp,a.socket_msg=t.data,a.dispatchEvent(t.data),a.msg_timestamp=null},t.socket.onclose=function(){a.closeConnection()},t.socket.ontimeout=function(t){console.log("got error"),console.log(t)}}).catch(function(e){console.log("Can't connect using websocket"),t.conn=t.default_conn})},closeConnection:function(){this.connected=!1,this.socket.close(),this.msg_timestamp=null},pingServer:function(){null!=this.msg_timestamp&&(console.log("Sent a ping but got no pong, disconnect"),this.closeConnection()),this.msg_timestamp=Date.now(),this.socket.send(JSON.stringify({op:"ping"})),this.connected&&(setTimeout(this.pingServer,this.ping_interval),this.ping_interval=Math.min(1.2*this.ping_interval,6*PING_INTERVAL_MS))},toggleCheckCompat:function(t){console.log("in toggleCheckCompat");var e=$("#skip_compat").prop("checked");vue__WEBPACK_IMPORTED_MODULE_17__["a"].localStorage.set("skip_studio_compat",e.toString()),this.skip_studio_compat=e},showTerminal:function(t){console.log(t),$(".terminal.icon").popup({popup:$(".terminal.popup"),on:"click",lastResort:"top right"})},showLogs:function(t){console.log(t)}}}},1792:function(t,e,a){"use strict";var i=a("21f7"),s=a.n(i);s.a},"1bf6":function(t,e,a){"use strict";var i=a("eb25"),s=a.n(i);s.a},"1f7e":function(t,e,a){"use strict";var i=a("bc46"),s=a.n(i);s.a},"1fd2":function(t,e,a){},"20a7":function(t,e,a){"use strict";var i=a("b58d"),s=a.n(i);s.a},"21f7":function(t,e,a){},"23f1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"builds"}},[a("div",{staticClass:"ui left vertical labeled icon small inverted sidebar menu"},[t._m(0),t._l(t.build_configs,function(e,i){return a("a",{staticClass:"ui buildconfigs dropdown item"},[a("i",{staticClass:"dropdown icon"}),a("div",{class:["ui",t.build_colors[i],"empty circular label"]}),t._v("\n            "+t._s(i)+" "),e.error?a("b",{staticClass:"red"},[a("i",{staticClass:"red bell icon"})]):t._e(),a("div",{staticClass:"ui inverted menu"},[e.error?t._e():a("div",{staticClass:"item",attrs:{"conf-name":i},on:{click:function(e){return t.newBuild(e)}}},[a("i",{staticClass:"cube icon"}),t._v(" Create new build")]),a("div",{staticClass:"item",attrs:{"conf-name":i},on:{click:function(e){return t.editConfiguration(e)}}},[a("i",{staticClass:"edit outline icon"}),t._v(" Edit configuration "),e.error?a("b",{staticClass:"red"},[a("i",{staticClass:"red bell icon"})]):t._e()]),a("div",{staticClass:"item",attrs:{"conf-name":i},on:{click:function(e){return t.deleteConfiguration(e)}}},[a("i",{staticClass:"trash alternate outline icon"}),t._v(" Delete configuration")])])])}),t._m(1),a("a",{staticClass:"item",on:{click:t.createConfiguration}},[t._m(2),a("div",[t._v("New configuration")])]),a("a",{staticClass:"item",on:{click:t.toggleShowArchivedConfigs}},[t._m(3),a("div",[t._v(t._s(t.include_archived_configs?"Hide":"Show")+"  archived configurations")])])],2),a("div",{staticClass:"pusher"},[a("div",{staticClass:"ui main container"},[a("div",{staticClass:"ui segment"},[a("div",{staticClass:"ui secondary small menu"},[t._m(4),a("a",{staticClass:"right aligned item"},[t.conf_filter?a("button",{staticClass:"ui clearconffilter button",on:{click:t.clearFilter}},[t._v("\n                            Clear \n                        ")]):t._e(),a("select",{directives:[{name:"model",rawName:"v-model",value:t.conf_filter,expression:"conf_filter"}],staticClass:"ui filterbuilds dropdown",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.conf_filter=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("Filter")]),t._l(t.build_configs,function(e,i){return a("option",{domProps:{value:i}},[a("div",{class:["ui",t.build_colors[i],"empty circular label"]}),t._v("\n                                "+t._s(i)+"\n                            ")])})],2)]),a("a",{staticClass:"item"},[a("div",{staticClass:"ui includearchived checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.only_archived,expression:"only_archived"}],attrs:{type:"checkbox",name:"includearchived"},domProps:{checked:Array.isArray(t.only_archived)?t._i(t.only_archived,null)>-1:t.only_archived},on:{change:function(e){var a=t.only_archived,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);i.checked?o<0&&(t.only_archived=a.concat([n])):o>-1&&(t.only_archived=a.slice(0,o).concat(a.slice(o+1)))}else t.only_archived=s}}}),a("label",[t._v("Show archived builds only")])])])])]),a("div",{staticClass:"ui centered grid"},t._l(t.builds,function(e){return a("div",{staticClass:"ui five wide column"},[a("build",{attrs:{pbuild:e,color:t.build_colors[e.build_config.name]}})],1)}),0)])]),a("div",{staticClass:"ui basic buildconfiguration modal"},[t._m(5),a("div",{staticClass:"content"},[a("div",{staticClass:"ui buildconfiguration form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[t.buildconf_error?a("div",{staticClass:"ui negative message"},[a("div",{staticClass:"header"},[t._v("\n                                Error in build configuration\n                              ")]),a("p",[t._v(t._s(t.buildconf_error))])]):t._e(),a("label",[t._v("Enter a build configuration name")]),a("input",{attrs:{type:"text",id:"conf_name",placeholder:"Configuration name",autofocus:""}}),a("br"),a("br"),a("label",[t._v('Enter a name for the type of stored documents ("gene", "variant", ...)')]),a("input",{attrs:{type:"text",id:"doc_type",placeholder:"Document type",autofocus:""}}),a("br"),a("br"),a("label",[t._v("Select the sources used to create merged data")]),a("select",{staticClass:"ui fluid sources dropdown",attrs:{id:"selected_sources",multiple:""}},[a("option",{attrs:{value:""}},[t._v("Available sources")]),t._l(t.sources,function(e){return a("option",[t._v(t._s(e))])})],2),a("br"),a("label",[t._v("Once sources are selected, choose sources providing root documents")]),t._m(6),a("br"),a("label",[t._v("Select a builder type")]),a("select",{staticClass:"ui fluid builders dropdown",attrs:{id:"builders"}},t._l(t.builder_classes,function(e,i){return a("option",{domProps:{value:i}},[t._v(t._s(i)+" "),e.default?a("i",[t._v("(default)")]):t._e()])}),0),a("div",{staticClass:"ui blue message"},[a("div",{staticClass:"header"},[t._v("\n                                About this builder\n                              ")]),a("p",{attrs:{id:"builder_doc"}},[t._v(t._s(t.builder_doc))])]),a("br"),a("p",[t._v("Optional parameters can be added to the configuration (usefull to customize builder behavior). Enter a JSON object structure")]),a("textarea",{attrs:{id:"optionals"}},[t._v("{}")]),t._m(7),a("label",[t._v("Remove this configuration from list by default")]),t._m(8),t._m(9)])])])]),t.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}),0)]):t._e(),t._m(10)]),t._m(11),t._m(12)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("i",[t._v("Existing configurations")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("i",[t._v("Other actions")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i",{staticClass:"big icons"},[a("i",{staticClass:"configure icon"}),a("i",{staticClass:"huge corner add icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i",{staticClass:"big icons"},[a("i",{staticClass:"archive icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"item",attrs:{id:"side_menu"}},[a("i",{staticClass:"sidebar icon"}),t._v("\n                        Menu\n                    ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"configure icon"}),t._v("\n                Create/edit build configuration\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"ui fluid rootsources dropdown",attrs:{id:"root_sources",multiple:""}},[a("option",{attrs:{value:""}},[t._v("Root sources")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui teal message"},[a("b",[t._v("Note")]),t._v(": sources providing root documents, or "),a("i",[t._v("root sources")]),t._v(", are sources allowed to\n                                create a new document in a build (merged data). If a root source is declared, data from other sources will only be merged "),a("b",[t._v("if")]),t._v("\n                                documents previously exist with same IDs (documents coming from root sources). If not, data is discarded. Finally, if no root source\n                                is declared, any data sources can generate a new document in the merged data.\n                            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",[t._v('You can still access it by clicking on "show/hide archived configuration" in the menu on the side')])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"archive_conf"}}),a("label",{staticClass:"white"},[t._v("Archive")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                    Cancel\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                    OK\n                ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui basic deleteconf modal"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"trash alternate icon"}),t._v("\n                Delete configuration\n            ")]),a("div",{staticClass:"content"},[a("p",[t._v("Are you sure you want to delete this build configuration ?")])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                    No\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                    Yes\n                ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui basic newbuild modal"},[a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"cube icon"}),t._v("\n                Create new build\n            ")]),a("div",{staticClass:"ui newbuild form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"ten wide column"},[a("p",[t._v("Enter a name for the merged data collection or leave it empty to generate a random one")]),a("input",{attrs:{type:"text",id:"target_name",placeholder:"Collection name",autofocus:""}}),a("div",{staticClass:"ui forcebuild checkbox"},[a("br"),a("input",{attrs:{type:"checkbox",name:"force_build",id:"force_build"}}),a("label",{staticClass:"white"},[t._v("Skip sanity checks and force build (not recommended)")])])]),a("div",{staticClass:"six wide column"})])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                    Cancel\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                    OK\n                ")])])])}],n=(a("7f7f"),a("55dd"),a("ac6a"),a("456d"),a("bc3a")),o=a.n(n),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid card"},[a("div",{staticClass:"content"},[a("div",{class:["ui",t.color?t.color:"grey","tiny","","label","conftag"]},[t._v(t._s(t.build.build_config.name))]),t.build.archived?a("i",{staticClass:"archived right floated archive icon"}):a("span",["building"==t.build.status?a("i",{staticClass:"right floated cube icon pulsing"}):t._e(),"inspecting"==t.build.status?a("i",{staticClass:"right floated unhide icon pulsing"}):t._e(),"diffing"==t.build.status?a("i",{staticClass:"right floated exchange icon pulsing"}):t._e(),"indexing"==t.build.status?a("i",{staticClass:"right floated bookmark icon pulsing"}):t._e()]),a("div",{staticClass:"ui",attrs:{"data-tooltip":t.displayError()}},["failed"==t.build.status?a("i",{staticClass:"right floated red alarm icon pulsing"}):t._e()]),a("div",{staticClass:"left aligned header",model:{value:t.build,callback:function(e){t.build=e},expression:"build"}},[a("router-link",{attrs:{to:{name:"build",params:{_id:t.build._id,color:t.color}}}},[a("a",[t._v(t._s(t.build.target_name))])])],1),a("div",{staticClass:"left aligned description"},[a("div",[a("i",{staticClass:"file outline icon"}),t._v("\n                "+t._s(t._f("currency")(t.build.count,"",0))+" document"+t._s(t.build.count>1?"s":"")+"\n                "),t.build._meta?a("span",{staticClass:"right floated category",model:{value:t.build,callback:function(e){t.build=e},expression:"build"}},[t._v(t._s(t.build._meta.build_version))]):t._e()])]),a("div",{staticClass:"meta"},[t.build.jobs?a("span",{staticClass:"left floated category",model:{value:t.build,callback:function(e){t.build=e},expression:"build"}},[t._v("Build time: "+t._s(t._f("timesofar")(t._f("build_time")(t.build.jobs))))]):t._e(),a("span",{staticClass:"right floated time",model:{value:t.build,callback:function(e){t.build=e},expression:"build"}},[t._v("Built "+t._s(t._f("moment")(t.build.started_at,"from","now")))])]),a("div",{staticClass:"ui clearing divider"}),a("div",{staticClass:"left aligned description"},[a("p"),t._m(0),a("div",{staticClass:"ui bottom attached tab segment active",attrs:{"data-tab":"sources"}},[a("build-sources",{attrs:{build:t.build}})],1),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"stats"}},[a("build-stats",{attrs:{build:t.build}})],1),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"logs"}},[a("build-logs",{attrs:{build:t.build}})],1),a("p")])]),a("div",{staticClass:"extra content"},[a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",attrs:{"data-build_id":t.build._id},on:{click:t.inspect}},[a("i",{staticClass:"unhide icon",attrs:{"data-build_id":t.build._id}})])]),a("div",{staticClass:"ui icon buttons right floated mini"},[a("button",{staticClass:"ui button"},[a("i",{staticClass:"trash icon",on:{click:function(e){return t.deleteBuild()}}})])]),t.build.archived?t._e():a("div",{staticClass:"ui icon buttons right floated mini"},[a("button",{staticClass:"ui button"},[a("i",{class:[t.build.archived?"archived":"","archive icon"],on:{click:function(e){return t.archiveBuild()}}})])])]),a("div",{staticClass:"ui basic deletebuild modal",attrs:{id:t.build._id}},[t._m(1),a("div",{staticClass:"content"},[a("p",[t._v("Are you sure you want to delete build "),a("b",[t._v(t._s(t.build.target_name))]),t._v(" ?")]),a("p",[t._v("All merged data and associated metadata will be deleted.")]),t._m(2)]),t._m(3)]),a("div",{staticClass:"ui basic archivebuild modal",attrs:{id:t.build._id}},[t._m(4),a("div",{staticClass:"content"},[a("p",[t._v("Are you sure you want to archive build "),a("b",[t._v(t._s(t.build.target_name))]),t._v(" ?")]),a("p",[t._v("Merged data will be deleted but metadata will be kept (merged source informations, logs, releases, etc...)")]),t._m(5)]),t._m(6)]),a("inspect-form",{attrs:{_id:t.build._id}})],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui top attached pointing secondary menu"},[a("a",{staticClass:"item active",attrs:{"data-tab":"sources"}},[t._v("Sources")]),a("a",{staticClass:"item",attrs:{"data-tab":"stats"}},[t._v("Stats")]),a("a",{staticClass:"item",attrs:{"data-tab":"logs"}},[t._v("Logs")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),t._v("\n            Delete build\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui warning message"},[t._v("\n                Note: this operation is "),a("b",[t._v("*not* reversible")]),t._v(" and should be used to completely delete all data and information\n                related to this build (eg. the build was an error...)\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                Yes\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"archive icon"}),t._v("\n            Archive build\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui warning message"},[t._v("\n                Note: this operation is "),a("b",[t._v("*not* reversible")]),t._v(" and should be used only for outdated, past builds no longer relevant nor used.\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                Yes\n            ")])])}],l=a("f5ef"),d=a("2b0e"),u=a("7df8"),_=a("de0c"),p=a("a59c"),m=a("e46a"),f=a("309e"),v=a("3361");function h(t){return t.map(function(t){return t.time_in_s}).reduce(function(t,e){return t+e},0)}d["a"].filter("build_time",h);var g={name:"build",props:["pbuild","color"],mounted:function(){$(".menu .item").tab()},created:function(){l["a"].$on("build_updated",this.onBuildChanged)},beforeDestroy:function(){l["a"].$off("build_updated",this.onBuildChanged),$("#".concat(this.build._id,".ui.basic.deletebuild.modal")).remove(),$("#".concat(this.build._id,".ui.basic.archivebuild.modal")).remove()},data:function(){return{build_from_api:null}},mixins:[u["a"],v["a"]],components:{InspectForm:_["a"],BuildLogs:p["a"],BuildStats:m["a"],BuildSources:f["a"]},computed:{build:function(){return this.build_from_api||this.pbuild}},methods:{displayError:function(){var t=[];if(this.build.jobs){var e=this.build.jobs[this.build.jobs.length-1];e&&e.err&&t.push("Step '".concat(e.step,"' failed: ").concat(e.err))}return 0==t.length&&t.push("Unknown error..."),t.join("<br>")},deleteBuild:function(){var t=this;$("#".concat(t.build._id,".ui.basic.deletebuild.modal")).modal("setting",{onApprove:function(){o.a.delete(o.a.defaults.baseURL+"/build/".concat(t.build._id)).then(function(t){return console.log(t.data.result),!0}).catch(function(t){console.log(t),console.log("Error deleting build: "+t.data.error)})}}).modal("show")},archiveBuild:function(){var t=this;$("#".concat(t.build._id,".ui.basic.archivebuild.modal")).modal("setting",{onApprove:function(){t.loading(),o.a.post(o.a.defaults.baseURL+"/build/".concat(t.build._id,"/archive")).then(function(e){return console.log(e.data.result),t.loaded(),!0}).catch(function(e){console.log(e),t.loaderror(e)})}}).modal("show")},onBuildChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=t&&this.build._id==t)return"remove"!=e&&"replace_one"!=e?this.getBuild():void l["a"].$emit("change_build")},getBuild:function(){var t=this;o.a.get(o.a.defaults.baseURL+"/build/"+this.build._id).then(function(e){t.build_from_api=e.data.result}).catch(function(t){console.log("Error getting build information: "+t)})}}},b=g,C=(a("5fb9"),a("0c7c")),w=Object(C["a"])(b,r,c,!1,null,"69ba480c",null),y=w.exports,E={name:"build-grid",mixins:[v["a"]],mounted:function(){var t=this;console.log("BuildGrid mounted"),$(".ui.filterbuilds.dropdown").dropdown(),$(".ui.buildconfigs.dropdown").dropdown(),$(".ui.rootsources.dropdown").dropdown(),$(".ui.sources.dropdown").dropdown({onChange:function(t,e,a){var i=$(".ui.sources.dropdown").dropdown("get value"),s=[];for(var n in i){var o=i[n],r={name:o,text:o,value:o};s.push(r)}$(".ui.rootsources.dropdown").dropdown("clear"),$(".ui.rootsources.dropdown").dropdown("setup menu",{values:s}).dropdown("refresh")}}),$(".ui.builders.dropdown").dropdown({onChange:function(e,a){t.setBuilderDoc(e)}}),$("#builds .ui.sidebar").sidebar({context:$("#builds")}).sidebar("setting","transition","overlay").sidebar("attach events","#side_menu"),$(".ui.form").form(),$(".ui.includearchived.checkbox").checkbox(),$(".ui.forcebuild.checkbox").checkbox()},updated:function(){$(".ui.buildconfigs.dropdown").dropdown()},created:function(){this.loading(),this.getSourceList(),this.getBuildConfigs(),this.getBuilds(),l["a"].$on("change_source",this.onSourceChanged),l["a"].$on("change_build",this.onBuildChanged),l["a"].$on("change_build_config",this.onBuildConfigChanged)},beforeDestroy:function(){clearInterval(this.interval),$(".ui.basic.deleteconf.modal").remove(),$(".ui.basic.newbuild.modal").remove(),$(".ui.basic.buildconfiguration.modal").remove(),l["a"].$off("change_source",this.onSourceChanged),l["a"].$off("change_build",this.onBuildChanged),l["a"].$off("change_build_config",this.onBuildConfigChanged)},watch:{conf_filter:function(t,e){t!=e&&this.getBuilds()},only_archived:function(t,e){t!=e&&this.getBuilds()}},data:function(){return{builds:[],sources:[],all_build_configs:{},build_configs:{},builder_classes:{},default_builder_class:null,builder_doc:"No documentation for this builder",buildconf_error:null,errors:[],build_colors:{},colors:["orange","green","yellow","olive","teal","violet","blue","pink","purple"],color_idx:0,conf_filter:"",only_archived:!1,include_archived_configs:!1}},computed:{},components:{Build:y},methods:{setBuilderDoc:function(t){var e=this.builder_classes[t];e&&(this.builder_doc=e["desc"]),this.builder_doc||(this.builder_doc="No documentation for this builder")},updateRootSources:function(){var t=$(".ui.buildconfiguration.form").form("get field","selected_sources").val();$("#root_sources").dropdown("clear"),$("#root_sources").empty(),$.each(t,function(e){var a=t[e];$("#root_sources").append($("<option></option>").val(a).html(a))}),$("#root_sources").dropdown().dropdown("refresh")},getBuilds:function(){var t=this,e=""==this.conf_filter?"":"?conf_name=".concat(this.conf_filter);this.only_archived&&(e+=""==e?"?only_archived=1":"&only_archived=1"),this.loading(),this.builds=[],o.a.get(o.a.defaults.baseURL+"/builds"+e).then(function(e){t.builds=e.data.result,t.loaded()}).catch(function(e){console.log("Error getting builds information: "+e),t.loaderror(e)})},setBuildConfigs:function(){this.build_configs={};var t=Object.keys(this.all_build_configs);for(var e in t)!this.include_archived_configs&&this.all_build_configs[t[e]].build_config["archived"]||(this.build_configs[t[e]]=this.all_build_configs[t[e]])},getBuildConfigs:function(){var t=this,e=this;e.build_colors={},e.color_idx=0,this.loading(),o.a.get(o.a.defaults.baseURL+"/build_manager").then(function(a){if(a.data.result.build_configs)for(var i in e.all_build_configs=a.data.result.build_configs,e.builder_classes=a.data.result.builder_classes,e.builder_classes)e.builder_classes[i]["default"]&&(e.default_builder_class=i);else e.all_build_configs=a.data.result,e.builder_classes=[];var s=Object.keys(e.all_build_configs);for(var i in s)e.build_colors[s[i]]=e.colors[e.color_idx++],e.color_idx+1>=Object.keys(e.colors).length&&(e.color_idx=0);e.setBuildConfigs(),t.loaded()}).catch(function(e){console.log("Error getting builds information: "+e),t.loaderror(e)})},getSourceList:function(){var t=this,e=this;this.loading(),e.sources=[],o.a.get(o.a.defaults.baseURL+"/sources").then(function(a){$(a.data.result).each(function(t,a){if(a["upload"])for(var i in a["upload"]["sources"])e.sources.push(i)}),e.sources.sort(),t.loaded()}).catch(function(e){console.log("Error listing sources: "+e),t.loaderror(e)})},buildExists:function(t){var e=!1,a=this;return $(this.builds).each(function(i){if(a.builds[i]["_id"]==t)return e=!0,!1}),e},onSourceChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSourceList()},onBuildChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==t?(console.log("Refreshing builds"),this.getBuilds()):this.buildExists(t)?l["a"].$emit("build_updated",t,e):this.getBuilds()},onBuildConfigChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.getBuildConfigs(),"remove"==t&&this.getBuilds()},showBuildConfig:function(t){$(t.currentTarget).html().trim()},clearConfigurationModal:function(){$("#selected_sources").dropdown("clear"),$("#root_sources").empty(),$("#root_sources").dropdown("clear"),$("#builders").dropdown("clear"),$(".ui.buildconfiguration.form").form("get field","conf_name").val(""),$(".ui.buildconfiguration.form").form("get field","doc_type").val(""),$(".ui.buildconfiguration.form").form("get field","optionals").val("{}"),$(".ui.buildconfiguration.form").form("get field","archive_conf").prop("checked",!1)},sendAPI:function(t,e){var a="new"==e?o.a.post:o.a.put,i=this;a(o.a.defaults.baseURL+"/buildconf",t).then(function(t){return i.loaded(),!0}).catch(function(t){console.log(t),console.log("Error creating build configuration: "+t.data.error),i.loaderror(t)})},showBuildConfigModal:function(t){this.setBuilderDoc($(".ui.buildconfiguration.form").form("get field","builders").val());var e=this;$(".ui.basic.buildconfiguration.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){e.errors=[];var a=$(".ui.buildconfiguration.form").form("get field","conf_name").val(),i=$(".ui.buildconfiguration.form").form("get field","doc_type").val(),s=$(".ui.buildconfiguration.form").form("get field","selected_sources").val(),n=[];a||e.errors.push("Provide a configuration name"),i||e.errors.push("Provide a document type"),0==s.length&&e.errors.push("Select at least one source to build merged data"),$(".ui.rootsources.dropdown a").each(function(t,e){n.push($(e).text())});var o=$(".ui.buildconfiguration.form").form("get field","builders").val(),r={};try{r=JSON.parse($(".ui.buildconfiguration.form").form("get field","optionals").val())}catch(d){e.errors.push("Invalid optional parameter: "+d)}if(e.errors.length)return!1;e.loading();var c=$(".ui.buildconfiguration.form").form("get field","archive_conf").prop("checked"),l={name:a,doc_type:i,sources:s,roots:n,builder_class:o,params:r,archived:c};e.sendAPI(l,t)}}).modal("show")},createConfiguration:function(){$("#builds .ui.sidebar").sidebar("hide"),this.clearConfigurationModal(),this.showBuildConfigModal("new")},editConfiguration:function(t){var e=$(t.currentTarget).attr("conf-name"),a=this.all_build_configs[e];if(a){this.buildconf_error=a.error,this.clearConfigurationModal(),$(".ui.buildconfiguration.form").form("get field","conf_name").val(a.build_config.name),$(".ui.buildconfiguration.form").form("get field","doc_type").val(a.build_config.doc_type),$(".ui.buildconfiguration.form").form("get field","selected_sources").val(a.build_config.sources).change(),this.updateRootSources(),$(".ui.buildconfiguration.form").form("get field","root_sources").val(a.build_config.root).change();var i=a.build_config.builder_class;i||(i=this.default_builder_class),$(".ui.buildconfiguration.form").form("get field","builders").val(i).change();var s={};$.each(a.build_config,function(t,e){-1==["name","doc_type","sources","root","_id","archived","builder_class"].indexOf(t)&&(s[t]=e)}),$(".ui.buildconfiguration.form").form("get field","optionals").val(JSON.stringify(s,null,4)),$(".ui.buildconfiguration.form").form("get field","archive_conf").prop("checked",a.build_config.archived),this.showBuildConfigModal("edit")}else console.log("Unable to get configuration details for ".concat(e))},deleteConfiguration:function(t){$("#builds .ui.sidebar").sidebar("hide");var e=$(t.currentTarget).attr("conf-name"),a=this;$(".ui.basic.deleteconf.modal").modal("setting",{detachable:!1,onApprove:function(){a.loading(),o.a.delete(o.a.defaults.baseURL+"/buildconf",{data:{name:e}}).then(function(t){return a.loaded(),!0}).catch(function(t){console.log(t),console.log(t.data.error),a.loaderror(t)})}}).modal("show")},newBuild:function(t){$("#builds .ui.sidebar").sidebar("hide");var e=$(t.currentTarget).attr("conf-name"),a=this;$(".ui.basic.newbuild.modal").modal("setting",{detachable:!1,onApprove:function(){a.loading();var t=$(".ui.newbuild.modal #target_name").val(),i=$(".ui.forcebuild.checkbox #force_build").prop("checked");""==t&&(t=null),o.a.put(o.a.defaults.baseURL+"/build/".concat(e,"/new"),{target_name:t,force:i}).then(function(t){return console.log(t.data.result),a.loaded(),!0}).catch(function(t){console.log(t),console.log(t.data.error),a.loaderror(t)})}}).modal("show")},clearFilter:function(){$(".ui.filterbuilds.dropdown").dropdown("clear"),this.conf_filter="",this.getBuilds()},toggleShowArchivedConfigs:function(){this.include_archived_configs=!this.include_archived_configs,this.setBuildConfigs()}}},k=E,x=(a("b28c"),Object(C["a"])(k,i,s,!1,null,"b2c80064",null));e["a"]=x.exports},"269c":function(t,e,a){"use strict";var i=a("d18a"),s=a.n(i);s.a},"2e2b":function(t,e,a){"use strict";var i=a("f731"),s=a.n(i);s.a},"2fa4":function(t,e,a){"use strict";var i=a("513e"),s=a.n(i);s.a},"309e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"ui small very compact blue table"},[t._m(0),t.build._meta?a("tbody",t._l(t.build._meta.src,function(e,i){return a("tr",[e.url?a("td",[a("a",{attrs:{href:e.url}},[t._v(t._s(i))])]):a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(e.version))])])}),0):a("tfoot",[t._m(1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Datasource")]),a("th",[t._v("Version")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("No data")]),a("th")])}],n=(a("bc3a"),a("f5ef"),{name:"build-sources",props:["build"],mounted:function(){},beforeDestroy:function(){},components:{},methods:{}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,i,s,!1,null,"4c11fc2e",null);e["a"]=c.exports},3361:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"loader","data-html":"<div>Page loaded</div>","data-position":"bottom center"}},[a("i",{staticClass:"big circle icon studiogrey",attrs:{id:"loading"}})])},s=[],n={name:"loader",mounted:function(){$("#loader").popup({on:"hover"})},components:{},created:function(){},beforeDestroy:function(){},computed:{},methods:{loaded:function(){$("#loading").removeClass("flashing"),$("#loading").removeClass("blinking"),$("#loading").addClass("studiogrey"),$("#loader").attr("data-html","<div>Page loaded</div>")},loadhide:function(){$("#loading").removeClass("red"),this.loaded()},loading:function(){this.loadhide(),$("#loading").addClass("flashing"),$("#loading").removeClass("studiogrey"),$("#loader").attr("data-html","<div>Loading</div>")},loaderror:function(t){var e="<div><b>Error while loading page</b><br>";console.log(t),void 0!=t.status&&(e+="XHR code: "+t.status+"<br>"),void 0!=t.data&&void 0!=t.data.error&&(e+="Error: "+t.data.error+"<br>"),t.config&&(e+="Request: "+t.config.method.toUpperCase()+" <a href='"+t.config.url+"'>"+t.config.url+"</a>"),e+="</div>",this.loaded(),$("#loading").removeClass("studiogrey"),$("#loading").addClass("red"),$("#loading").addClass("blinking"),$("#loader").attr("data-html",e)}}},o=n,r=(a("20a7"),a("0c7c")),c=Object(r["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},"38c9":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.event?a("span",["hub_restart"==t.event.event?a("span",{staticClass:"content"},[a("alert-restart",{attrs:{event:t.event}})],1):"hub_stop"==t.event.event?a("span",{staticClass:"content"},[a("alert-stop",{attrs:{event:t.event}})],1):t._e()]):t._e()},s=[],n=(a("bc3a"),a("f5ef")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui mini alert modal"},[a("div",{staticClass:"header"},[t._v("\n        "+t._s(t.event.msg)+"\n    ")]),t._m(0),t._m(1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("p",[t._v("You have been disconnected")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui positive right labeled icon button"},[t._v("\n            OK\n            "),a("i",{staticClass:"checkmark icon"})])])}],c={name:"alert-stop",props:["event"],mounted:function(){console.log("AlertStop mounted"),$(".mini.alert.modal").modal("setting","closable",!1).modal("show")},updated:function(){},created:function(){},beforeDestroy:function(){n["a"].$on("alert",this.onAlert)},watch:{},computed:{},data:function(){return{}},components:{},methods:{}},l=c,d=a("0c7c"),u=Object(d["a"])(l,o,r,!1,null,null,null),_=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui mini alert modal"},[a("div",{staticClass:"header"},[t._v("\n        "+t._s(t.event.msg)+"\n    ")]),t._m(0),t._m(1)])},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("p",[t._v("Do you want to reconnect ?")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui negative button"},[t._v("\n            No\n        ")]),a("div",{staticClass:"ui positive right labeled icon button"},[t._v("\n            Yes\n            "),a("i",{staticClass:"checkmark icon"})])])}],f={name:"alert-restart",props:["event"],mounted:function(){console.log("AlertRestart mounted"),$(".mini.alert.modal").modal({closable:!1,onApprove:function(){n["a"].$emit("reconnect")}}).modal("show")},updated:function(){},created:function(){},beforeDestroy:function(){},watch:{},computed:{},data:function(){return{}},components:{},methods:{}},v=f,h=Object(d["a"])(v,p,m,!1,null,null,null),g=h.exports,b={name:"event-alert",mounted:function(){console.log("EventAlert mounted")},updated:function(){},created:function(){n["a"].$on("alert",this.onAlert)},beforeDestroy:function(){},watch:{},computed:{},data:function(){return{event:null}},components:{AlertStop:_,AlertRestart:g},methods:{onAlert:function(t){console.log("on alert"),console.log(t),this.event=t}}},C=b,w=Object(d["a"])(C,i,s,!1,null,null,null);e["a"]=w.exports},"3c84":function(t,e,a){},"3e50":function(t,e,a){"use strict";var i=a("6f4a"),s=a.n(i);s.a},"3e54":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},s=[],n=(a("a481"),{methods:{html2json:function(t){t=t||"{}",t=t.replace(/<.*?>/g,"");try{return JSON.parse(t)}catch(e){throw console.log("Error parsing mapping: ".concat(e)),console.log(t),e}}}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},"3f5c":function(t,e,a){"use strict";var i=a("86ff"),s=a.n(i);s.a},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=n(t);return a(e)}function n(t){var e=i[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}s.keys=function(){return Object.keys(i)},s.resolve=n,t.exports=s,s.id="4678"},"513e":function(t,e,a){},"54d7":function(t,e,a){},"55b7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},s=[],n=a("bc3a"),o=a.n(n),r=a("f5ef"),c=a("3e54"),l={mixins:[c["a"]],methods:{diffMapping:function(t,e,a){var i=$("#".concat(a,"-").concat(t)).html(),s=this.html2json(i),n=$("#".concat(a,"-").concat(e)).html(),c=this.html2json(n);o.a.post(o.a.defaults.baseURL+"/jsondiff",{src:s,dst:c}).then(function(t){console.log(t.data.result),r["a"].$emit("diffed",t.data.result),r["a"].$emit("show_diffed")}).catch(function(t){console.log("Error diffing mappings: "+t)})}}},d=l,u=a("0c7c"),_=Object(u["a"])(d,i,s,!1,null,null,null);e["a"]=_.exports},"55dc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui two column centered grid"},[a("div",{staticClass:"four column centered row"}),a("div",{staticClass:"fourteen wide column centered row"},[a("div",{staticClass:"column"},[a("div",{staticClass:"ui statistics"},[a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[a("i",{staticClass:"database icon"}),Object.keys(t.status).length&&t.status.source&&t.status.source.total?a("span",[t.status.source?a("span",[t._v(t._s(t.status.source.total))]):a("span")]):a("span",[t._v("0")])]),a("div",{staticClass:"label"},[Object.keys(t.status).length&&t.status.source&&t.status.source.total>1?a("span",[t._v("\n                            Datasources\n                        ")]):a("span",[t._v("Datasource")])])]),a("div",{staticClass:"statistic"},[a("div",{staticClass:"text value"},[Object.keys(t.status).length&&t.status.source&&t.status.source.documents?a("span",[t.status.source?a("span",[t._v("\n                            "+t._s(t._f("formatNumber")(t.status.source.documents))+"\n                            ")]):a("span")]):a("span",[t._v("No")]),a("br"),a("i",{staticClass:"file icon"})]),a("div",{staticClass:"label"},[Object.keys(t.status).length&&t.status.source&&t.status.source.documents>1?a("span",[t._v("\n                        Documents\n                        ")]):a("span",[t._v("Document (yet)")])])]),a("div",{staticClass:"statistic"},[a("div",{staticClass:"value"},[a("i",{staticClass:"cubes icon"}),Object.keys(t.status).length&&t.status.build&&t.status.build.total?a("span",[t.status.build?a("span",[t._v("\n                                "+t._s(t.status.build.total)+"\n                            ")]):a("span")]):a("span",[t._v("0")])]),a("div",{staticClass:"label"},[Object.keys(t.status).length&&t.status.build&&t.status.build.total>1?a("span",[t._v("\n                            Builds\n                        ")]):a("span",[t._v("Build")])])])])])]),a("div",{staticClass:"four column centered row"}),a("div",{staticClass:"eight wide column centered row"},[a("h4",{staticClass:"ui blue header"},[t._v("What's new")]),a("div",{staticClass:"ui segment"},[Object.keys(t.whatsnew).length?a("span",[a("div",{staticClass:"column centered"},[a("div",{staticClass:"ui feed"},t._l(t.whatsnew,function(e,i){return a("div",{staticClass:"event"},[t._m(0,!0),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[a("a",{staticClass:"user"},[t._v("\n                                    "+t._s(i)+"\n                                ")]),t._v(" can be rebuilt, it contains "),a("a",[t._v(t._s(Object.keys(e.sources).length)+" updated datasource(s)")]),t._v(".\n                                "),a("br"),a("div",{staticClass:"date"},[t._v("\n                                    Previous build was "),a("i",[t._v(t._s(e.old_build.name))]),t._v(", built on "+t._s(t._f("moment")(e.old_build.built_at,"lll"))+"\n                                ")])]),t._l(e.sources,function(e,i){return a("div",{staticClass:"mymeta"},[a("i",{staticClass:"database icon"}),a("b",[t._v(t._s(i))]),t._v(": "+t._s(e.old.version)+" "),a("i",{staticClass:"small arrow right icon"}),t._v(" "+t._s(e.new.version)+"\n                                "),a("i",[t._v("("+t._s(t._f("moment")(e.new.downloaded_at,"from","now"))+")")])])})],2)])}),0)]),a("div",{staticClass:"four column centered row"})]):a("span",[t._v("Not much, nothing happened recently...")])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("i",{staticClass:"cubes icon"})])}],n=a("3361"),o=a("bc3a"),r=a.n(o),c=(a("f5ef"),{name:"status",mixins:[n["a"]],mounted:function(){console.log("Status mounted"),this.refreshStatus(),this.refreshWhatsNew()},created:function(){},beforeDestroy:function(){},data:function(){return{status:{},whatsnew:{},errors:[]}},components:{Loader:n["a"]},methods:{refreshStatus:function(){var t=this;this.loading(),r.a.get(r.a.defaults.baseURL+"/status").then(function(e){t.status=e.data.result,t.loaded()}).catch(function(e){console.log("Error getting sources information: "+e),t.loaderror(e)})},refreshWhatsNew:function(){var t=this;r.a.get(r.a.defaults.baseURL+"/whatsnew").then(function(e){t.whatsnew=e.data.result}).catch(function(t){console.log("Error getting sources information: "+t)})}}}),l=c,d=(a("8704"),a("0c7c")),u=Object(d["a"])(l,i,s,!1,null,null,null);e["a"]=u.exports},"562c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid container"},[t.build?a("div",{staticClass:"ui centered fluid card",attrs:{id:"build"}},[a("div",{staticClass:"content"},[t.build.target_name?a("div",{staticClass:"left aligned header"},[t._v(t._s(t.build.target_name))]):t._e(),a("div",{staticClass:"meta"},[t.build.started_at?a("span",{staticClass:"right floated time"},[t._v("Built "+t._s(t._f("moment")(t.build.started_at,"from","now"))+"\n                    "),t.build.archived?a("div",{staticClass:"time"},[t._v("Archived "+t._s(t._f("moment")(t.build.archived,"from","now")))]):t._e()]):t._e(),a("div",{class:["ui",t.color?t.color:"grey tiny","left floated","label conftag"]},[t._v(t._s(t.build.build_config.name))])]),a("div",{staticClass:"left aligned description"},[a("p"),a("div",{staticClass:"ui clearing divider"}),a("div",[a("i",{staticClass:"file outline icon"}),t._v("\n                        "+t._s(t._f("currency")(t.build.count,"",0))+" document"+t._s(t.build.count>1?"s":"")+"\n                    ")]),a("br"),a("p"),a("p"),t._m(0),a("div",{staticClass:"ui bottom attached tab segment active",attrs:{"data-tab":"info"}},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"six wide column"},[a("h5",[t._v("Configuration")]),a("build-config",{attrs:{build:t.build}})],1),a("div",{staticClass:"five wide column"},[a("h5",[t._v("Sources")]),a("build-sources",{attrs:{build:t.build}}),a("h5",[t._v("Statistics")]),a("build-stats",{attrs:{build:t.build}})],1),a("div",{staticClass:"five wide column"},[a("h5",[t._v("Logs")]),a("build-logs",{attrs:{build:t.build}})],1)])]),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"mapping"}},[a("build-mapping",{attrs:{build:t.build}})],1),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"releases"}},[a("build-releases",{attrs:{build:t.build}})],1),a("p")])]),a("diff-modal")],1):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui top attached pointing menu"},[a("a",{staticClass:"red item active",attrs:{"data-tab":"info"}},[t._v("Information")]),a("a",{staticClass:"red item",attrs:{"data-tab":"mapping"}},[t._v("Mapping")]),a("a",{staticClass:"red item",attrs:{"data-tab":"releases"}},[t._v("Releases")])])}],n=a("bc3a"),o=a.n(n),r=a("f5ef"),c=a("de0c"),l=a("7df8"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("div",{staticClass:"ui error message"},[t._v("\n        "+t._s(t.error)+"\n    ")]):t._e(),a("button",{staticClass:"ui newrelease  button",on:{click:t.newRelease}},[t._v("\n        New release\n    ")]),t.releases?a("div",{staticClass:"ui feed"},t._l(t.releases,function(e){return a("div",{staticClass:"event"},[e.index_name?a("index-release-event",{attrs:{release:e}}):t._e(),e.diff?a("diff-release-event",{attrs:{release:e,index_envs:t.index_envs,build_config:t.build.build_config}}):t._e()],1)}),0):a("div",[t._v("\n        No release found\n    ")]),a("div",{staticClass:"ui basic newrelease modal"},[t._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[t._v("Select the type of release")]),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.release_type,expression:"release_type"}],staticClass:"ui releasetype dropdown",attrs:{name:"release_type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.release_type=e.target.multiple?a:a[0]}}},[a("option",[t._v("incremental")]),a("option",[t._v("full")])]),a("br"),a("br")]),"incremental"==t.release_type?a("span",[a("label",[t._v("Select a build to compute incremental release (compared to this one)")]),a("div",[t.avail_builds.length?a("select",{staticClass:"ui fluid availbuilds dropdown",attrs:{name:"old_build"}},t._l(t.avail_builds,function(e){return a("option",[t._v(t._s(e))])}),0):a("div",{staticClass:"ui red message"},[t._v("\n                                    No build available to compute incremental data release\n                                ")]),a("br")]),a("div",[a("label",[t._v("Select the type of diff files to generate")]),a("select",{staticClass:"ui fluid difftypes dropdown",attrs:{name:"diff_type"}},t._l(t.diff_types,function(e){return a("option",{domProps:{selected:"jsondiff-selfcontained"==e}},[t._v(t._s(e))])}),0),a("br")])]):t._e(),"full"==t.release_type?a("span",[t._m(1),a("div",[a("label",[t._v("Select an indexer environment to create the index on")]),a("select",{staticClass:"ui fluid indexenvs dropdown",attrs:{name:"index_env"}},t._l(t.index_envs.env,function(e,i){return a("option",{attrs:{"data-env":i}},[t._v(t._s(i)+" "),a("i",[t._v("("+t._s(e.host)+")")])])}),0),a("br")])]):t._e()]),t._m(2)])])]),t.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}),0)]):t._e(),t._m(3)])])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"tag icon"}),t._v("\n            Create new release\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",[t._v("Enter a name for the index (or leave it empty to have the same name as the build)")]),a("input",{attrs:{type:"text",name:"index_name",placeholder:"Index name",autofocus:""}}),a("br"),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eight wide column"},[a("div",{staticClass:"ui teal message"},[a("b",[t._v("Note")]),t._v(": sources providing root documents, or "),a("i",[t._v("root sources")]),t._v(", are sources allowed to\n                            create a new document in a build (merged data). If a root source is declared, data from other sources will only be merged "),a("b",[t._v("if")]),t._v("\n                            documents previously exist with same IDs (documents coming from root sources). If not, data is discarded. Finally, if no root source\n                            is declared, any data sources can generate a new document in the merged data.\n                        ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                OK\n            ")])])}],_=(a("456d"),a("55dd"),a("ac6a"),a("8615"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"event-container"},[t._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[t._v("\n            Index\n            "),a("a",{staticClass:"user"},[t._v("\n                "+t._s(t.release.index_name)+"\n            ")]),t._v(" was created on "),a("b",[t._v(t._s(t.release.environment))]),t._v(" environment ("),a("a",[t._v(t._s(t.release.host))]),t._v(")\n            "),a("div",{staticClass:"date"},[t._v("\n                "+t._s(t._f("moment")(t.release.created_at,"from","now"))+"\n                ("),a("i",[t._v("on "+t._s(t.moment(t.release.created_at).format("MMMM Do YYYY, h:mm:ss a")))]),t._v(")\n\n            ")])]),a("div",{staticClass:"meta"},[a("i",{staticClass:"file alternate icon"}),t._v(" "+t._s(t.num_indexed)+" documents indexed\n            ")])])])}),p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("i",{staticClass:"ui bookmark icon"})])}],m={name:"index-release-event",props:["release"],mounted:function(){},beforeDestroy:function(){},components:{},data:function(){return{}},computed:{num_indexed:function(){return this.release.count||0}},methods:{displayError:function(){},snapshot:function(t){console.log("TODO snapshot"),console.log(t)},publish:function(t){console.log("TODO publish"),console.log(t)}}},f=m,v=(a("2fa4"),a("0c7c")),h=Object(v["a"])(f,_,p,!1,null,null,null),g=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"event-container"},[t._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[a("a",[t._v("diff")]),t._v(" with "),a("i",[t._v(t._s(t.release.old.backend||"?"))]),t._v(" has been computed."),a("br"),t._v("\n            Old version: "),a("b",[t._v(t._s(t.release.old.version))]),t._v(", current version: "),a("b",[t._v(t._s(t.release.new.version))]),a("div",{staticClass:"date"},[t._v("\n                "+t._s(t._f("moment")(t.release.created_at,"from","now"))+"\n                ("),a("i",[t._v("on "+t._s(t.moment(t.release.created_at).format("MMMM Do YYYY, h:mm:ss a")))]),t._v(")\n\n            ")])]),a("div",{staticClass:"meta"},[a("i",{staticClass:"file alternate icon"}),t._v(" "+t._s(t.release.diff.files.length)+" diff files created\n            "),a("button",{staticClass:"ui mini labeled icon button",on:{click:function(e){return t.applyDiff(t.release)}}},[a("i",{staticClass:"external link square alternate\n                    icon"}),t._v("\n                Apply\n            ")]),a("button",{staticClass:"ui mini labeled icon button",on:{click:function(e){return t.publish(t.release)}}},[a("i",{staticClass:"share alternate square icon"}),t._v("\n                Publish\n            ")])])]),a("div",{class:["ui basic applydiff modal",t.release.old.backend]},[t._m(1),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[t._v("Select a backend to apply the diff to")]),a("div",[a("select",{staticClass:"ui fluid backendenv dropdown",attrs:{name:"target_backend"}},t._l(t.compats,function(e){return a("option",{attrs:{"data-es_host":e.host,"data-index":e.index}},[t._v(t._s(e.env)+" ("+t._s(e.host)+" | "+t._s(e.index)+")")])}),0),a("br"),a("br")])]),a("div",{staticClass:"eight wide column"})])])]),t.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}),0)]):t._e(),t._m(2)])])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("i",{staticClass:"large exchange alternate icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"tag icon"}),t._v("\n            Apply increment update (diff)\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                OK\n            ")])])}],w={name:"diff-release-event",props:["release","build_config"],mounted:function(){$(".ui.backendenv.dropdown").dropdown()},beforeDestroy:function(){$(".ui.basic.applydiff.modal").remove()},created:function(){},components:{},data:function(){return{errors:[],compats:{}}},computed:{},methods:{displayError:function(){},applyDiff:function(t){var e=this;o.a.get(o.a.defaults.baseURL+"/index_manager?remote=1").then(function(t){var a=t.data.result;e.compats=e.selectCompatibles(a),$(".ui.backendenv.dropdown").dropdown()}).catch(function(t){throw console.log("Error getting index environments: "),console.log(t),t});var a=t.old.backend,i=t.new.backend,s=(t.diff.type,"es"),n=this.build_config.doc_type;$(".ui.basic.applydiff.modal.".concat(this.release.old.backend)).modal("setting",{detachable:!1,onApprove:function(){var t=$(".ui.form select[name=target_backend] :selected"),e=$(t).attr("data-es_host"),c=$(t).attr("data-index"),l=[e,c,n];o.a.post(o.a.defaults.baseURL+"/sync",{backend_type:s,old_db_col_names:a,new_db_col_names:i,target_backend:l}).then(function(t){return console.log(t.data.result),r["a"].$emit("reload_build_detailed"),t.data.result}).catch(function(t){console.log("Error applying diff: "),console.log(t)})}}).modal("show")},publish:function(t){console.log("TODO publish"),console.log(t)},selectCompatibles:function(t){var e=[],a=null,i=this;return t.build_config_key&&(a=this.build_config[t.build_config_key]),$.each(t.env,function(t,s){if(a&&!s.index.hasOwnProperty(a))return!0;for(var n in s.index)s.index[n]["doc_type"]==i.build_config.doc_type&&(a&&a!=n||e.push({env:t,host:s["host"],index:s.index[n]["index"]}))}),e}}},y=w,E=(a("d2f5"),Object(v["a"])(y,b,C,!1,null,null,null)),k=E.exports,x={name:"build-releases",props:["build"],mounted:function(){$(".ui.releasetype.dropdown").dropdown()},created:function(){this.loadData()},beforeDestroy:function(){$(".ui.basic.newrelease.modal").remove()},components:{IndexReleaseEvent:g,DiffReleaseEvent:k},data:function(){return{errors:[],release_type:null,diff_types:[],avail_builds:[],index_envs:[]}},computed:{releases:function(){var t=[];return this.build.index&&(t=t.concat(Object.values(this.build.index))),this.build.diff&&(t=t.concat(Object.values(this.build.diff))),t.sort(function(t,e){var a=t.created_at&&Date.parse(t.created_at),i=e.created_at&&Date.parse(e.created_at);return console.log("da ".concat(a," db ").concat(i)),i-a}),console.log(t),t},error:function(){var t=this.build.jobs[this.build.jobs.length-1];if(t&&t.err)return t.err}},methods:{displayError:function(){},newFullRelease:function(){var t=$(".ui.form input[name=index_name]").val();""==t&&(t=null);var e=$(".ui.form select[name=index_env] :selected").attr("data-env");o.a.put(o.a.defaults.baseURL+"/index",{indexer_env:e,target_name:this.build._id,index_name:t}).then(function(t){return console.log(t.data.result),t.data.result}).catch(function(t){console.log("Error creating index: "),console.log(t)})},newIncrementalRelease:function(){var t=$(".ui.form select[name=old_build]").val(),e=$(".ui.form select[name=diff_type]").val();t||this.errors.push("Select a build to compute incremental data"),e||this.errors.push("Select a diff type"),o.a.put(o.a.defaults.baseURL+"/diff",{diff_type:e,old:t,new:this.build._id}).then(function(t){return console.log(t.data.result),t.data.result}).catch(function(t){console.log("Error creating diff: "),console.log(t)})},newRelease:function(){var t=this;$(".ui.basic.newrelease.modal").modal("setting",{detachable:!1,onApprove:function(){t.errors=[];var e=$(".ui.form select[name=release_type]").val();return"full"==e?t.newFullRelease():"incremental"==e?t.newIncrementalRelease():(console.log("Unknown release type ".concat(e)),!1)}}).modal("show")},loadData:function(){var t=this;o.a.get(o.a.defaults.baseURL+"/diff_manager").then(function(e){console.log(e.data.result),t.diff_types=Object.keys(e.data.result).sort()}).catch(function(t){console.log(t),console.log("Error loading differ information: "+t.data.error)}),o.a.get(o.a.defaults.baseURL+"/index_manager").then(function(e){t.index_envs=e.data.result}).catch(function(t){console.log(t),console.log("Error loading differ information: "+t.data.error)}),o.a.get(o.a.defaults.baseURL+"/builds?conf_name=".concat(this.build.build_config._id)).then(function(e){console.log(e.data.result),$(e.data.result).each(function(e,a){console.log("".concat(a._id," ").concat(t.build._id)),a._id!=t.build._id&&t.avail_builds.push(a._id)})}).catch(function(t){console.log(t),console.log("Error loading differ information: "+t.data.error)})}}},O=x,j=Object(v["a"])(O,d,u,!1,null,null,null),D=j.exports,M=a("309e"),P=a("e46a"),A=a("a59c"),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"ui small fixed padded compact grey table"},[t._m(0),a("tbody",[a("tr",[a("td",[t._v("Name")]),a("td",[t._v(t._s(t.build.build_config._id))])]),a("tr",[a("td",[t._v("Document type")]),a("td",[t._v(t._s(t.build.build_config.doc_type))])]),a("tr",[a("td",[t._v("Merged source(s)")]),t.build.build_config.sources?a("td",[t._v(t._s(t.build.build_config.sources.join(", ")))]):t._e()]),a("tr",[a("td",[t._v("Root source(s)")]),t.build.build_config.root?a("td",[t._v(t._s(t.build.build_config.root.join(", ")))]):t._e()]),a("tr",[a("td",[t._v("Others")]),a("td",[t._v(t._s(JSON.stringify(t.others)))])])])])},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr")])}],I=(a("6762"),a("2fdb"),{name:"build-stats",props:["build"],mounted:function(){},beforeDestroy:function(){},computed:{others:function(){var t={};for(var e in this.build.build_config)["_id","name","sources","root","doc_type"].includes(e)||(t[e]=this.build.build_config[e]);return t}},components:{},methods:{}}),S=I,U=Object(v["a"])(S,R,L,!1,null,"2243bb78",null),B=U.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"ui fluid basic segment right aligned"},[a("button",{staticClass:"ui button mini",on:{click:t.inspect}},[a("i",{staticClass:"unhide icon"}),t._v("\n            Inspect data\n        ")])]),a("inspect-form",{attrs:{_id:t.build._id}}),a("p",[t._v("\n        These are the mappings for build "),a("b",[t._v(t._s(t.build._id))]),t._v(".\n    ")]),t._m(0),a("p",[t._v("\n        Mappings can be manually edited and mapping from inspection can be saved as the new registered, active mapping.\n    ")]),t._m(1),t.maps?a("div",{staticClass:"ui segment"},[a("div",{staticClass:"ui grid"},[!t.maps["inspect_mapping"]||t.maps["inspect_mapping"]["errors"]||t.maps["inspect_mapping"]["pre-mapping"]?t._e():a("div",{staticClass:"center aligned sixteen wide column"},[a("button",{staticClass:"ui labeled mini icon button",on:{click:function(e){return t.diffMapping("tab_mapping_inspected","tab_mapping_registered",t.build._id)}}},[a("i",{staticClass:"exchange icon"}),t._v("\n                    Diff\n                ")])]),a("div",{staticClass:"sixteen wide column"},[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"eight wide column"},[t.maps?a("mapping-map",{attrs:{entity:"build",map:t.maps["inspect_mapping"],name:t.build._id,map_origin:"inspect",map_id:"tab_mapping_inspected",read_only:t.maps["inspect_mapping"]&&t.maps["inspect_mapping"]["pre-mapping"],can_commit:!t.maps["registered_mapping"]||"uploader"!=t.maps["registered_mapping"]["origin"]}}):t._e()],1),a("div",{staticClass:"eight wide column"},[t.maps["registered_mapping"]?a("mapping-map",{attrs:{entity:"build",map:t.maps["registered_mapping"],name:t.build._id,map_origin:"build",map_id:"tab_mapping_registered",read_only:!1,can_commit:!1}}):t._e()],1)])])])]):a("div",{staticClass:"ui segment"},[t._v("\n        No mapping found.\n        "),a("button",{staticClass:"ui button mini",on:{click:t.inspect}},[a("i",{staticClass:"unhide icon"}),t._v("\n            Inspect data\n        ")]),t._v("\n        to create one.\n    ")])],1)},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("i",[t._v("Mapping from inspection")]),t._v(" has been generated during data inspection, while "),a("i",[t._v("Registered mapping")]),t._v(" is the actual active mapping, used during indexation.\n    ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui warning message"},[a("ul",{staticClass:"ui list"},[a("li",[t._v("Registered mapping is created by merging each source's mapping. Modifications may not survive as it can be re-generated.")]),a("li",[t._v("When testing a mapping, an temporary index is created on the selection ElasticSearch environment. That index is then deleted.")])])])}],K=a("8ae6"),W=a("f1f5"),N=a("55b7"),J={name:"build-mapping",props:["build"],mixins:[N["a"]],components:{InspectForm:c["a"],MappingMap:K["a"],JsonDiffResults:W["a"],BuildReleases:D,BuildSources:M["a"],BuildStats:P["a"],BuildLogs:A["a"],BuildConfig:B},mounted:function(){console.log("BuildDetailed mounted")},updated:function(){$("select.dropdown").dropdown(),$(".menu .item").tab()},data:function(){return{}},computed:{maps:function(){var t={};return this.build.mapping&&(t["registered_mapping"]=this.build.mapping),this.build.inspect&&this.build.inspect.results&&(t["inspect_mapping"]=this.build.inspect.results.mapping),Object.keys(t).length?t:null}},methods:{displayError:function(){var t=[];return t.join("<br>")},inspect:function(t){r["a"].$emit("do_inspect",this.build._id)}}},z=J,F=(a("6f78"),Object(v["a"])(z,T,q,!1,null,null,null)),Y=F.exports,V=a("6a96"),G=a("3361"),H={name:"build-detailed",props:["_id","color"],mixins:[l["a"],G["a"]],components:{InspectForm:c["a"],BuildReleases:D,BuildMapping:Y,DiffModal:V["a"],BuildSources:M["a"],BuildStats:P["a"],BuildLogs:A["a"],BuildConfig:B,Loader:G["a"]},mounted:function(){console.log("BuildDetailed mounted"),this.loadData()},updated:function(){$("select.dropdown").dropdown(),$(".menu .item").tab()},created:function(){r["a"].$on("change_build",this.loadData)},beforeDestroy:function(){r["a"].$off("change_build",this.loadData)},data:function(){return{build:null}},methods:{displayError:function(){var t=[];return t.join("<br>")},loadData:function(){var t=this,e=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/build/".concat(this._id)).then(function(a){e.build=a.data.result,t.loaded()}).catch(function(e){console.log("Error getting build information: "+e),t.loaderror(e)})}}},Q=H,X=(a("59e4"),Object(v["a"])(Q,i,s,!1,null,null,null));e["a"]=X.exports},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"ui fixed inverted menu"},[i("div",{staticClass:"ui studio container"},[i("div",{staticClass:"item"},[i("div",{staticClass:"ui middle aligned mini"},[i("choose-hub")],1)]),i("div",{staticClass:"header item"},[i("img",{staticClass:"logo",attrs:{src:a("11df")}}),i("div",{attrs:{id:"conn","data-html":"<div style='width:30em;'><a>"+t.conn.url+"</a><br>App. version: <b>"+t.str_app_version+"</b><br>Biothings version: <b>"+t.str_biothings_version+"</b><br></div>Studio version: <b>"+t.current_studio_version+"</b><br></div>","data-position":"bottom center"}},[t._v(t._s(t.conn.name||"John Doe"))])]),i("a",{staticClass:"clickable item"},[i("i",{staticClass:"ui home icon"}),i("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),i("a",{staticClass:"clickable item"},[i("i",{staticClass:"ui database icon"}),i("router-link",{attrs:{to:"/sources"}},[t._v("Sources")])],1),i("a",{staticClass:"clickable item"},[i("i",{staticClass:"ui cubes icon"}),i("router-link",{attrs:{to:"/builds"}},[t._v("Builds")])],1),i("a",{staticClass:"clickable item"},[i("i",{staticClass:"ui shield alternate icon"}),i("router-link",{attrs:{to:"/apis"}},[t._v("API")])],1),i("div",{staticClass:"clickable ui item right"},[i("job-summary")],1),i("div",{staticClass:"clickable ui item"},[i("event-messages")],1),i("div",{staticClass:"ui item"},[i("loader"),t.socket&&1==t.socket.readyState?i("div",{attrs:{id:"connected","data-tooltip":"Quality: unknown","data-position":"bottom center"}},[i("i",{staticClass:"inverted circular signal icon"})]):t._e(),t.socket&&1==t.socket.readyState?i("div",{attrs:{"data-tooltip":"Connection: "+t.socket.protocol,"data-position":"bottom center"}},[i("button",{staticClass:"mini circular ui icon button",on:{click:t.closeConnection}},[i("i",{staticClass:"green power off icon"})])]):i("div",[i("button",{staticClass:"mini circular ui icon button",attrs:{"data-tooltip":"Click to reconnect","data-position":"bottom center"},on:{click:t.openConnection}},[i("i",{staticClass:"red plug icon"})])])],1)])]),i("div",{staticClass:"ui basic redirect modal"},[t.redirect_url?i("div",{staticClass:"content"},[i("p",[t._v("\n                    Hub requires a different Studio version, found here: "),i("a",{attrs:{href:t.redirect_url}},[t._v(t._s(t.redirect_url))])]),i("p",[t._v("\n                    This page will automatically redirect to this URL in "+t._s(t.redirect_delay/1e3)+" second(s) unless cancelled.\n                ")])]):i("div",{staticClass:"content"},[t._m(0),i("p",[t._v("\n                    For your information, required version is: "),i("code",[i("b",[t._v(t._s(t.required_studio_version))])]),i("br"),t._v("\n                    Tested URLs were:\n                    ")]),i("div",{staticClass:"ui inverted segment"},[i("div",{staticClass:"ui ordered inverted list"},t._l(t.compat_urls,function(e){return i("div",{staticClass:"item"},[i("a",{attrs:{href:e}},[t._v(t._s(e))])])}),0)]),i("p")]),i("div",{staticClass:"content"},[i("div",{staticClass:"ui form"},[i("div",{staticClass:"ui checkbox"},[i("input",{attrs:{id:"skip_compat",type:"checkbox"},on:{click:function(e){return t.toggleCheckCompat(e)}}}),i("label",{staticClass:"white"},[t._v("Skip compatility check")])])])]),i("div",{staticClass:"actions"},[t.redirect_url?i("div",{staticClass:"ui red basic cancel inverted button"},[i("i",{staticClass:"remove icon"}),t._v("\n                    Keep this version (not recommended)\n                ")]):t._e(),t._m(1)])]),i("div",{staticClass:"clickable ui active tab segment",attrs:{id:"page_content"}},[i("router-view")],1),i("event-alert"),i("div",{staticClass:"ui mini grey bottom fixed inverted menu"},[t._m(2),t._m(3),t._m(4),i("div",{staticClass:"ui logs popup top transition hidden"},[i("log-viewer")],1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("\n                    Hub requires a different Studio version than the one currently running."),a("br"),t._v("\n                    No other URLs could be found as a compatible Studio version."),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                    Validate\n                ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left menu"},[a("a",{staticClass:"clickable terminal item"},[a("i",{staticClass:"terminal icon"}),t._v("\n                  Terminal\n              ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right menu"},[a("a",{staticClass:"clickable logs item"},[a("i",{staticClass:"bell outline icon"}),t._v("\n                  Logs\n              ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui terminal popup top left transition hidden",staticStyle:{width:"50%"}},[a("div",{staticClass:"ui inverted segment"},[t._v("\n                  terminal\n              ")])])}],o=a("148b"),r=o["a"],c=(a("034f"),a("0c7c")),l=Object(c["a"])(r,s,n,!1,null,null,null),d=l.exports,u=a("bc3a"),_=a.n(u),p=a("c1df"),m=a.n(p);i["a"].prototype.moment=m.a;var f=i["a"].localStorage.get("last_conn");if(f){var v=JSON.parse(f);_.a.defaults.baseURL=v.url}else _.a.defaults.baseURL="http://".concat(window.location.hostname,":7080");console.log("axios default URl: ".concat(_.a.defaults.baseURL)),new i["a"]({el:"#app",render:function(t){return t(d)},router:d.router})},5988:function(t,e,a){"use strict";var i=a("08fb"),s=a.n(i);s.a},"59e4":function(t,e,a){"use strict";var i=a("1fd2"),s=a.n(i);s.a},"5fb9":function(t,e,a){"use strict";var i=a("e0a0"),s=a.n(i);s.a},"607a":function(t){t.exports=[{when:{biothings_version:{branch:"0.2.3",commit:null,date:">2019-03-21"}},requires:"0.1f"},{when:{biothings_version:{branch:"0.2.2",commit:null,date:null}},requires:"0.1e"},{when:{biothings_version:{branch:"master"}},requires:"0.2a"}]},"648d":function(t,e,a){"use strict";var i=a("3c84"),s=a.n(i);s.a},"65a2":function(t,e,a){},"669c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui center aligned tiny"},[a("button",{staticClass:"ui compact labeled icon commands button tiny"},[a("i",{staticClass:"settings icon"}),t._v("\n      "+t._s(t.num_commands)+"\n  ")]),a("div",{staticClass:"ui commands popup top left transition hidden"},[a("commands-list")],1),a("button",{staticClass:"ui compact labeled icon processes button tiny"},[a("i",{staticClass:"rocket icon"}),t._v("\n      "+t._s(t.job_manager.queue?t.job_manager.queue.process.running.length:"?")+"/"+t._s(t.job_manager.queue?t.job_manager.queue.process.max:"?")+"\n  ")]),a("div",{staticClass:"ui processes popup top left transition hidden"},[a("processes-list",{attrs:{processes:t.processes}})],1),a("button",{staticClass:"ui compact labeled icon threads button tiny"},[a("i",{staticClass:"lightning icon"}),t._v("\n    "+t._s(t.job_manager.queue?t.job_manager.queue.thread.running.length:"?")+"/"+t._s(t.job_manager.queue?t.job_manager.queue.thread.max:"?")+"\n  ")]),a("div",{staticClass:"ui threads popup top left transition hidden"},[a("threads-list",{attrs:{threads:t.threads}})],1),t.job_manager.queue?a("div",{staticClass:"ui small grey label",attrs:{"data-tooltip":"Number of queued jobs","data-position":"bottom center"}},[a("i",{staticClass:"hourglass start icon"}),t._v("\n    "+t._s(t.job_manager.queue.thread.pending.length+t.job_manager.queue.process.pending.length)+"\n  ")]):t._e(),t.job_manager.queue?a("div",{staticClass:"ui small grey label",attrs:{"data-tooltip":"Amount of memory hub is currently using","data-position":"bottom center"}},[a("i",{staticClass:"right microchip icon"}),t._v("\n    "+t._s(t._f("pretty_size")(t.job_manager.memory))+"\n  ")]):t._e()])},s=[],n=a("bc3a"),o=a.n(n),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui right floated header"},[a("div",{staticClass:"ui toggle checkbox"},[a("label",[t._v("Show all")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.allcmds,expression:"allcmds"}],staticClass:"hidden",attrs:{type:"checkbox",tabindex:"0"},domProps:{checked:Array.isArray(t.allcmds)?t._i(t.allcmds,null)>-1:t.allcmds},on:{change:function(e){var a=t.allcmds,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);i.checked?o<0&&(t.allcmds=a.concat([n])):o>-1&&(t.allcmds=a.slice(0,o).concat(a.slice(o+1)))}else t.allcmds=s}}})])]),Object.keys(t.commands).length?a("table",{staticClass:"ui compact celled table"},t._l(t.orderedCommands,function(e){return a("tr",{class:[e.is_done&e.failed?"negative":"",e.is_done&!e.failed?"positive":"","nowrap"]},[a("td",[e.is_done?a("i",{class:[e.is_done&e.failed?"attention icon":"",e.is_done&!e.failed?"icon checkmark":""]}):a("i",{staticClass:"notched circle loading icon"})]),a("td",{staticClass:"right aligned"},[t._v(t._s(e.id))]),a("td",[t._v(t._s(t._f("truncate")(e.cmd,60)))]),e.is_done?a("td",[t._v(t._s(e.duration))]):a("td",[t._v(t._s(t._f("moment")(new Date(0).setUTCSeconds(e.started_at),"from","now")))])])}),0):a("div",[t._v("No command to show")])])},c=[],l=(a("456d"),a("ac6a"),a("8615"),a("f5ef")),d={name:"commands-list",props:[],mounted:function(){console.log("CommandsList mounted"),$(".commands.button").popup({popup:$(".commands.popup"),on:"click"}),$(".ui.toggle.checkbox").checkbox(),this.refreshCommands()},created:function(){l["a"].$on("change_command",this.onCommandChanged)},beforeDestroy:function(){l["a"].$off("change_command",this.onCommandChanged),$(".ui.basic.unregister.modal").remove()},ready:function(){console.log("command item ready")},data:function(){return{allcmds:!1,commands:{}}},computed:{orderedCommands:function(){return _.orderBy(Object.values(this.commands),"id",-1)}},watch:{allcmds:"showAllToggled"},methods:{showAllToggled:function(){this.refreshCommands()},onCommandChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.refreshCommands()},refreshCommands:function(){var t=this,e=o.a.defaults.baseURL+"/commands";this.allcmds||(e+="?running=1"),o.a.get(e).then(function(e){t.commands=e.data.result,l["a"].$emit("num_commands",Object.keys(t.commands).length)}).catch(function(t){console.log("Error getting runnings commands: "+t)})}}},u=d,p=(a("1bf6"),a("0c7c")),m=Object(p["a"])(u,r,c,!1,null,null,null),f=m.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.processes.all?a("div",[a("div",{staticClass:"ui three columns centered grid"},[a("div",{staticClass:"three wide column"},[t.processes.running?a("div",{staticClass:"ui tiny label"},[t._v("\n                Running"),a("div",{staticClass:"detail"},[t._v(t._s(t.processes.running.length))])]):t._e()]),a("div",{staticClass:"three wide column"},[t.processes.pending?a("div",{staticClass:"ui tiny label"},[t._v("\n                Pending"),a("div",{staticClass:"detail"},[t._v(t._s(t.processes.pending.length))])]):t._e()]),a("div",{staticClass:"three wide column"},[a("div",{staticClass:"ui tiny label"},[t._v("\n                Max"),t.processes?a("div",{staticClass:"detail"},[t._v(t._s(t.processes.max))]):t._e()])])]),Object.keys(t.processes.all).length?a("table",{staticClass:"ui nowrap compact celled table"},t._l(t.processes.all,function(e,i){return a("tr",{class:["running"==e.cpu.status?"positive":"","nowrap"]},[a("td",[a("div",{attrs:{"data-tooltip":e.cpu.status}},["running"==e.cpu.status?a("i",{staticClass:"ui notched circle loading icon"}):"sleeping"==e.cpu.status?a("i",{staticClass:"ui hotel icon"}):a("i",{staticClass:"ui wait icon"})])]),a("td",{staticClass:"right aligned"},[t._v(t._s(i))]),e.job?a("td",[t._v(t._s(e.job.category))]):t._e(),e.job?a("td",[t._v(t._s(e.job.step))]):t._e(),e.job?a("td",[t._v(t._s(e.job.source))]):t._e(),e.job?a("td",[t._v(t._s(e.job.duration))]):a("td",{staticClass:"center aligned",attrs:{colspan:"4"}},[a("i",[t._v("ready")])]),a("td",{staticClass:"right aligned"},[t._v(t._s(t._f("pretty_size")(e.memory.size)))])])}),0):a("div",[t._v("No process to show")])]):t._e()},h=[],g={name:"processes-list",props:["processes"],methods:{},mounted:function(){console.log("ProcessesList mounted"),$(".ui.toggle.checkbox").checkbox()},ready:function(){console.log("process item ready")},watch:{}},b=g,C=Object(p["a"])(b,v,h,!1,null,null,null),w=C.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ui grid"},[a("div",{staticClass:"four wide column"},[t.threads.running?a("div",{staticClass:"ui tiny label"},[t._v("\n                Running"),a("div",{staticClass:"detail"},[t._v(t._s(t.threads.running.length))])]):t._e()]),a("div",{staticClass:"four wide column"},[t.threads.pending?a("div",{staticClass:"ui tiny label"},[t._v("\n                Pending"),a("div",{staticClass:"detail"},[t._v(t._s(t.threads.pending.length))])]):t._e()]),a("div",{staticClass:"four wide column"},[t.threads.all?a("div",{staticClass:"ui tiny label"},[t._v("\n                Ready"),a("div",{staticClass:"detail"},[t._v(t._s(Object.keys(t.threads.all).length))])]):t._e()]),a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui tiny label"},[t._v("\n                Max"),a("div",{staticClass:"detail"},[t._v(t._s(t.threads.max))])])])]),t.threads.running?a("table",{staticClass:"ui compact celled table"},t._l(t.threads.all,function(e,i){return a("tr",{class:[e.job?"positive":"","nowrap"]},[a("td",{staticClass:"nowrap"},[a("div",[e.job?a("i",{staticClass:"ui notched circle loading icon"}):a("i",{staticClass:"ui hotel icon"})])]),a("td",{staticClass:"right aligned"},[t._v(t._s(i))]),e.job?a("td",{staticClass:"nowrap"},[t._v(t._s(e.job.category))]):t._e(),e.job?a("td",{staticClass:"nowrap"},[t._v(t._s(e.job.step))]):t._e(),e.job?a("td",{staticClass:"nowrap"},[t._v(t._s(e.job.source))]):t._e(),e.job?a("td",{staticClass:"nowrap"},[t._v(t._s(e.job.duration))]):a("td",{staticClass:"nowrap center aligned",attrs:{colspan:"4"}})])}),0):a("div",[t._v("No thread to show")])])},E=[],k={name:"threads-list",props:["threads"],methods:{},mounted:function(){console.log("ThreadsList mounted"),$(".ui.toggle.checkbox").checkbox()},ready:function(){console.log("thread item ready")},watch:{}},x=k,O=Object(p["a"])(x,y,E,!1,null,null,null),j=O.exports,D=3e3,M={name:"job-summary",mounted:function(){var t=this;console.log("JobSummary mounted"),this.getJobSummary(),$(".processes.button").popup({popup:$(".processes.popup"),on:"click",lastResort:"bottom right",onVisible:function(){t.onJobsOpened(!0)},onHide:function(){t.onJobsOpened(!1)}}),$(".threads.button").popup({popup:$(".threads.popup"),on:"click",lastResort:"bottom right",onVisible:function(){t.onJobsOpened(!0)},onHide:function(){t.onJobsOpened(!1)}})},created:function(){l["a"].$on("num_commands",this.updateNumCommands)},beforeDestroy:function(){l["a"].$off("num_commands",this.updateNumCommands)},data:function(){return{num_commands:0,job_manager:{},processes:{},threads:{},show_allcmds:!1,jobs_interval:null}},watch:{num_commands:function(t,e){0==t&&(console.log("Stop polling jobs"),this.stopPollJobs()),0==e&&t>0&&(console.log("Start polling jobs"),this.startPollJobs())}},components:{CommandsList:f,ProcessesList:w,ThreadsList:j},methods:{updateNumCommands:function(t){this.num_commands=t,this.getJobSummary()},startPollJobs:function(){null==this.jobs_interval&&(this.jobs_interval=setInterval(this.getJobSummary,D))},stopPollJobs:function(){clearInterval(this.jobs_interval),this.jobs_interval=null},getJobSummary:function(){var t=this;o.a.get(o.a.defaults.baseURL+"/job_manager").then(function(e){t.job_manager=e.data.result,t.processes=t.job_manager.queue.process,t.threads=t.job_manager.queue.thread}).catch(function(t){console.log("Error getting job manager information: "+t)})},onJobsOpened:function(t){console.log(t),t?(this.getJobSummary(),this.startPollJobs()):0==this.num_commands&&this.stopPollJobs()}}},P=M,A=Object(p["a"])(P,i,s,!1,null,null,null);e["a"]=A.exports},"68b8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid container"},[t.source?a("div",{staticClass:"ui centered fluid card",attrs:{id:"data-source"}},[a("div",{staticClass:"content"},[t.source.name?a("div",{staticClass:"left aligned header"},[t._v(t._s(t.source.name))]):t._e(),a("div",{staticClass:"meta"},[t.source.download&&t.source.download.started_at?a("span",{staticClass:"right floated time"},[t._v("Updated "+t._s(t._f("moment")(t.source.download.started_at,"from","now")))]):a("span",{staticClass:"right floated time"},[t._v("Never updated")]),a("span",{staticClass:"left floated category"},[t._v(t._s(t.release))])]),a("div",{staticClass:"left aligned description"},[a("p"),a("div",{staticClass:"ui clearing divider"}),a("div",{staticClass:"left floated"},[a("i",{staticClass:"file outline icon"}),t._v("\n                        "+t._s(t._f("currency")(t.source.count,"",0))+" document"+t._s(t.source.count>1?"s":"")+"\n                    ")]),a("div",{staticClass:"right floated"},[null!==t.license&&"object"===typeof t.license?a("span",[a("table",{staticClass:"meta ui single line compact small table"},[a("thead",[a("tr",t._l(t.license,function(e,i){return a("th",[t._v(t._s(i))])}),0)]),a("tbody",[a("tr",t._l(t.license,function(e){return a("td",[e.startsWith("http")?a("a",{attrs:{href:e}},[t._v("license")]):a("span",[t._v(t._s(t.license))])])}),0),a("tr",t._l(t.website,function(e){return a("td",[a("a",{attrs:{href:e}},[t._v("website")])])}),0)])])]):a("span",[a("table",{staticClass:"meta ui single line compact small table"},[a("tbody",[a("tr",[a("td",[t.license_url?a("a",{attrs:{href:t.license_url}},[t.license?a("span",[t._v(t._s(t.license))]):a("span",[t._v("license")])]):a("span",[t._v(t._s(t.license))])]),a("td",[t.website?a("a",{attrs:{href:t.website}},[t._v("website")]):t._e()])])])])])]),a("br"),a("p"),a("p"),a("div",{staticClass:"ui top attached pointing menu"},[t.source.download?a("a",{staticClass:"red item active",attrs:{"data-tab":"dump"}},[t._v("Dumper")]):t._e(),t.source.upload?a("a",{class:["red item",void 0==t.source.download?"active":""],attrs:{"data-tab":"upload"}},[t._v("Uploader")]):t._e(),t.source.data_plugin?a("a",{staticClass:"red item",attrs:{"data-tab":"plugin"}},[t._v("Plugin")]):t._e(),a("a",{staticClass:"red item",attrs:{"data-tab":"mapping"}},[t._v("Mapping")])]),t.source.download?a("div",{staticClass:"ui bottom attached tab segment active",attrs:{"data-tab":"dump"}},[a("data-source-dump",{attrs:{source:t.source}})],1):t._e(),t.source.upload?a("div",{class:["ui bottom attached tab segment",void 0==t.source.download?"active":""],attrs:{"data-tab":"upload"}},[a("data-source-upload",{attrs:{source:t.source}})],1):t._e(),t.source.data_plugin?a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"plugin"}},[a("data-source-plugin",{attrs:{source:t.source}})],1):t._e(),a("div",{staticClass:"ui bottom attached tab segment",attrs:{"data-tab":"mapping"}},[a("data-source-mapping",{attrs:{maps:t.maps,_id:t._id}})],1),a("p")])]),a("inspect-form",{attrs:{toinspect:t.source,select_data_provider:!0}}),t.source.data_plugin?a("div",{staticClass:"ui basic unregister modal"},[a("input",{staticClass:"plugin_url",attrs:{type:"hidden"},domProps:{value:t.source.data_plugin.plugin.url}}),t._m(0),a("div",{staticClass:"content"},[a("p",[t._v("Are you sure you want to unregister and delete data plugin "),a("b",[t._v(t._s(t.source.name))]),t._v(" ?")])]),t._m(1)]):t._e(),a("diff-modal")],1):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),t._v("\n                Unregister data plugin\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                    No\n                ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                    Yes\n                ")])])}],n=(a("ac6a"),a("456d"),a("bc3a")),o=a.n(n),r=a("f5ef"),c=a("de0c"),l=a("dc15"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui two grid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"ten wide column"},[a("table",{staticClass:"ui small very compact definition collapsing table"},[a("tbody",[a("tr",[a("td",[t._v("Release")]),a("td",[t._v("\n                            "+t._s(t.source.download.release)+"\n                        ")])]),a("tr",[a("td",[t._v("Status")]),a("td",[a("i",{class:"failed"==t.source.download.status?"red":"green"},[t._v(t._s(t.source.download.status))])])]),a("tr",[a("td",[t._v("\n                            Data folder\n                        ")]),a("td",[t.source.download.data_folder?a("a",{attrs:{href:t._f("replace")(t.source.download.data_folder,"/data/biothings_studio","")}},[t._v(t._s(t.source.download.data_folder))]):t._e()])]),t.source.download.error?a("tr",[a("td",[t._v("Error")]),a("td",[a("div",{staticClass:"red"},[t._v(t._s(t.source.download.error))])])]):t._e(),a("tr",[a("td",[t._v("Last download")]),a("td",[t._v(t._s(t.source.download.started_at)+" "),t.source.download.started_at?a("i",[t._v("("+t._s(t._f("moment")(t.source.download.started_at,"from","now"))+")")]):t._e()])]),a("tr",[a("td",[t._v("Duration")]),a("td",[t._v(t._s(t.source.download.time))])]),a("tr",[a("td",{staticClass:"ui grey"},[t._v("Dumper")]),a("td",[t._v("\n                            "+t._s(t.source.download.dumper.name)+"\n                            "),t.source.download.dumper.manual?a("span",[t._v("(manual)")]):t._e()])])])])]),a("div",{staticClass:"six wide column"},[a("div",{class:["ui dump form",t.source._id]},[a("div",{staticClass:"fields"},[t._m(0),a("div",{staticClass:"required six wide field"},[a("button",{class:["ui labeled small icon button","downloading"==t.$parent.download_status?"disabled":""],on:{click:function(e){return t.do_dump()}}},[a("i",{staticClass:"download cloud icon"}),t._v("\n                            Dump\n                        ")])])])])])])])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ten wide field"},[a("div",{staticClass:"ui checkbox"},[a("input",{staticClass:"hidden",attrs:{type:"checkbox",tabindex:"0",id:"force"}}),a("label",[t._v("Bypass check for new release availability, and force dump")])])])}],_={name:"data-source-dump",props:["source"],mounted:function(){$(".ui.checkbox").checkbox()},components:{},methods:{do_dump:function(){var t=$(".ui.dump.form.".concat(this.source._id)).form("get field","force"),e=null;return t&&(e=t.is(":checked")),console.log(e),this.$parent.dump(null,e)}}},p=_,m=a("0c7c"),f=Object(m["a"])(p,d,u,!1,null,null,null),v=f.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.source.upload&&t.source.upload.sources?a("span",[Object.keys(t.source.upload.sources).length>1?a("span",[a("div",{staticClass:"ui top attached tabular menu",attrs:{id:"srcs"}},t._l(t.source.upload.sources,function(e,i,s){return a("a",{class:["green item",0===s?"active":""],attrs:{"data-tab":i}},[t._v(t._s(i))])}),0)]):t._e(),t._l(t.source.upload.sources,function(e,i,s){return a("div",{class:["ui bottom attached tab segment",0===s?"active":""],attrs:{"data-tab":i}},[a("div",{staticClass:"ui two grid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"ten wide column"},[a("table",{staticClass:"ui small very compact definition collapsing table"},[a("tbody",[a("tr",[a("td",[t._v("Release")]),a("td",[t._v("\n                                        "+t._s(e.release)+"\n                                    ")])]),a("tr",[a("td",[t._v("\n                                        Data folder\n                                    ")]),a("td",[e.data_folder?a("a",{attrs:{href:t._f("replace")(e.data_folder,"/data/biothings_studio","")}},[t._v(t._s(e.data_folder))]):t._e()])]),a("tr",[a("td",[t._v("Status")]),a("td",[a("i",{class:"failed"==e.status?"red":"green"},[t._v(t._s(e.status))])])]),e.error?a("tr",[a("td",[t._v("Error")]),a("td",[a("div",{staticClass:"red"},[t._v(t._s(e.error))])])]):t._e(),a("tr",[a("td",[t._v("Last upload")]),a("td",[t._v(t._s(e.started_at)+" "),e.started_at?a("i",[t._v("("+t._s(t._f("moment")(e.started_at,"from","now"))+")")]):t._e()])]),a("tr",[a("td",[t._v("Duration")]),a("td",[t._v(t._s(e.time))])]),a("tr",[a("td",[t._v("Documents uploaded")]),a("td",[t._v(t._s(t._f("currency")(e.count,"",0)))])]),a("tr",[a("td",{staticClass:"ui grey"},[t._v("Uploader")]),e.uploader?a("td",[t._v("\n                                        "+t._s(e.uploader.name)+"\n                                        "),e.uploader.dummy?a("span",[t._v("(dummy)")]):t._e()]):a("td",[a("div",{staticClass:"red"},[t._v("No uploader found, datasource may be broken")])])])])])]),e.uploader?a("div",{staticClass:"six wide column"},[e.uploader.dummy?a("p",[t._v("This is a "),a("i",[t._v("dummy")]),t._v(" uploader, meaning data isn't actually uploaded but rather already stored in a collection.\n                            In order to register data, a "),a("b",[t._v("release")]),t._v(" is required in order the uploader to run properly.")]):t._e(),a("div",{class:["ui upload form",i]},[a("div",{staticClass:"fields"},[a("div",{staticClass:"required ten wide field"},[e.uploader.dummy?a("input",{attrs:{type:"text",id:"release",placeholder:"Specify a release (optional)",autofocus:""}}):t._e()]),a("div",{staticClass:"required six wide field"},[a("button",{class:["ui labeled small icon button","uploading"==e.status?"disabled":""],on:{click:function(e){return t.do_upload(i=i)}}},[a("i",{staticClass:"database icon"}),t._v("\n                                        Upload\n                                    ")])])])])]):t._e()])])])})],2):a("div",[t._v("\n        No uploader found for this source.\n    ")])])},g=[],b={name:"data-source-upload",props:["source"],mounted:function(){$(".menu .item").tab()},components:{},methods:{do_upload:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.$parent.upload(t=t)}}},C=b,w=Object(m["a"])(C,h,g,!1,null,null,null),y=w.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.maps?a("span",[Object.keys(t.maps).length>1?a("span",[a("p",[t._v("Found sub-sources linked to main source "),a("b",[t._v(t._s(t._id))]),t._v(", select one to see inspection data")]),a("div",{staticClass:"ui top attached tabular menu",attrs:{id:"maps"}},t._l(t.maps,function(e,i,s){return a("a",{class:["green item",0===s?"active":""],attrs:{"data-tab":i}},[t._v(t._s(i))])}),0)]):t._e(),t._l(t.maps,function(e,i,s){return t.maps?a("div",{class:["ui bottom attached tab segment",0===s?"active":""],attrs:{"data-tab":i}},[a("p",[t._v("These are the results for the different inspection mode found for source "),a("b",[t._v(t._s(i))])]),a("table",{staticClass:"ui celled table"},[a("thead",[a("tr",{staticClass:"ui center aligned"},[t._m(0,!0),a("th",{staticClass:"eight wide top aligned"},[t._v("\n                        Mode "),a("i",[t._v("mapping")]),a("div",[t.maps[i]["mapping"]?a("button",{staticClass:"ui labeled mini icon button",on:{click:function(e){return t.saveMapping(i)}}},[a("i",{staticClass:"save icon"}),t._v("\n                            Save\n                        ")]):t._e()])])])]),a("tbody",[a("tr",{staticClass:"top aligned"},[a("td",[t.maps[i]?a("type-map",{attrs:{map:t.maps[i]["inspect_type"],map_id:"tab_inspect_type"}}):t._e()],1),a("td",[t.maps[i]["inspect_mapping"]?a("mapping-map",{attrs:{map:t.maps[i]["inspect_mapping"],name:i,map_id:"tab_inspect_mapping"}}):t._e()],1)])])])]):t._e()})],2):a("div",[t._v("\n    No inspection data found for this source\n")])])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"eight wide top aligned"},[t._v("Mode "),a("i",[t._v("type")])])}],x=(a("7514"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.map?a("pre",[t._v(t._s(t.map)+"\n        ")]):a("div",{staticClass:"description"},[t._v("No type data inspection")])])}),O=[],j=a("7618"),D={name:"type-map",props:["map"],mounted:function(){},created:function(){r["a"].$on("type_map",this.update)},beforeDestroy:function(){r["a"].$off("type_map",this.update)},data:function(){return{}},components:{},methods:{extractType:function(t){var e=[],a=/<class '(.*)'>/,i=this;function s(t,s){var n=a.exec(t);if(n)if("list"==n[1]){var o=i.extractType(s);o?e.push("list[".concat(o,"]")):e.push("list")}else e.push(n[1])}if("object"==Object(j["a"])(t))for(var n in t)s(n,t[n]);else"string"==typeof t&&s(t,null);if(e.length)var o=e.join(",");else o=null;return o}}},M=D,P=(a("1f7e"),Object(m["a"])(M,x,O,!1,null,null,null)),A=P.exports,R=a("8ae6"),L=a("3e54"),I={name:"data-source-inspect",props:["_id","maps"],mixins:[L["a"]],mounted:function(){$(".menu .item").tab(),$("#maps .item:first").addClass("active"),$(".tab:first").addClass("active")},components:{TypeMap:A,MappingMap:R["a"]},methods:{inspect:function(){var t=this;$("#inspect-".concat(this._id,".ui.basic.inspect.modal")).modal("setting",{onApprove:function(){var e=$("#inspect-".concat(t._id)).find("#select-mode").val(),a=$("#inspect-".concat(t._id)).find("#select-data_provider").val();o.a.put(o.a.defaults.baseURL+"/inspect",{data_provider:[a,t._id],mode:e}).then(function(t){console.log(t.data.result),r["a"].$emit("refresh_sources")}).catch(function(t){console.log("Error getting job manager information: "+t)})}}).modal("show")},saveMapping:function(t,e,a){var i=$("#".concat(t)).html(),s=this.html2json(i);r["a"].$emit("save_mapping",e,s,"inspect")}}},S=I,U=Object(m["a"])(S,E,k,!1,null,null,null),B=U.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui two grid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"ten wide column"},[a("table",{staticClass:"ui small very compact definition collapsing table"},[a("tbody",[a("tr",[a("td",{staticClass:"ui grey"},[t._v("URL")]),"github"==t.source.data_plugin.plugin.type?a("td",[a("i",{staticClass:"github icon"}),a("span",[a("a",{attrs:{href:t.source.data_plugin.plugin.url}},[t._v(t._s(t.source.data_plugin.plugin.url))])])]):a("td",[t._v("No information available")])]),a("tr",[a("td",[t._v("Release")]),a("td",[t._v("\n                "+t._s(t.source.data_plugin.download.release)+"\n              ")])]),a("tr",[a("td",[t._v("Source folder")]),a("td",[t.source.data_plugin.download.data_folder?a("a",{attrs:{href:t._f("replace")(t.source.data_plugin.download.data_folder,"/data/biothings_studio","")}},[t._v(t._s(t.source.data_plugin.download.data_folder))]):t._e()])]),t.source.data_plugin.download.error?a("tr",[a("td",[t._v("Error")]),a("td",[a("div",{staticClass:"red"},[t._v(t._s(t.source.data_plugin.download.error))])])]):t._e(),a("tr",[a("td",[t._v("Last download")]),a("td",[t._v(t._s(t.source.data_plugin.download.started_at)+" "),t.source.data_plugin.download.started_at?a("i",[t._v("("+t._s(t._f("moment")(t.source.data_plugin.download.started_at,"from","now"))+")")]):t._e()])]),a("tr",[a("td",[t._v("Duration")]),a("td",[t._v(t._s(t.source.data_plugin.download.time))])])])])]),a("div",{staticClass:"six wide column"},[a("div",{class:["ui plugin form",t.source._id]},[a("div",{staticClass:"fields"},[t._m(0),a("div",{staticClass:"required six wide field"},[a("button",{staticClass:"ui labeled small icon button",on:{click:function(e){return t.onUpdatePlugin()}}},[a("i",{staticClass:"database icon"}),t._v("\n                Update\n              ")])])]),a("div",{staticClass:"fields"},[a("div",{staticClass:"required ten wide field"}),a("div",{staticClass:"required six wide field"},[a("button",{staticClass:"ui labeled small icon button",on:{click:function(e){return t.onExportCode()}}},[a("i",{staticClass:"upload icon"}),t._v("\n                Export code\n              ")])])])])])]),a("div",{staticClass:"ui basic exportplugin modal"},[t._m(1),a("p",[t._v('\n        Plugin code can be exported to be able to modify directly the source code. This allows to\n        create a "manual datasource" (as opposed to automatically generated trought the plugin architecture)\n        which can be customized in more depth, using BioThings SDK.\n      ')]),a("div",{staticClass:"content"},[a("div",{staticClass:"ui exportform form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"sixteen wide column"},[a("label",[t._v("Plugin parts to export")]),a("div",{staticClass:"grouped fields"},[a("div",{staticClass:"field"},[t._m(2),t.export_results?a("plugin-part-export",{attrs:{part:t.export_results.dumper,ptype:"dumper"}}):t._e()],1),a("div",{staticClass:"field"},[t._m(3),t.export_results?a("plugin-part-export",{attrs:{part:t.export_results.uploader,ptype:"uploader"}}):t._e()],1),a("div",{staticClass:"field"},[t._m(4),t.export_results?a("plugin-part-export",{attrs:{part:t.export_results.mapping,ptype:"mapping"}}):t._e()],1)]),a("br"),a("label",{staticClass:"white"},[t._v("Delete any previously exported code")]),t._m(5)]),a("div",{staticClass:"eight wide column"},[t.export_error?a("div",{staticClass:"ui negative message"},[a("p",[t._v(t._s(t.export_error))])]):t._e(),Object.keys(t.export_results).length?a("div",{staticClass:"ui positive message"},[a("p",[t._v("\n                  You may want to adjust ACTIVE_DATASOURCES parameter in\n                  configuration to activate this new exported datasource.\n                ")])]):t._e()]),t._m(6)])])])])])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"required ten wide field"},[a("input",{attrs:{type:"text",id:"release",placeholder:"Specify a commit hash or branch (optional)",autofocus:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"upload icon"}),t._v("\n        Export plugin code\n      ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"dumper",checked:"checked"}}),a("label",{staticClass:"white"},[t._v("Dumper")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"uploader",checked:"checked"}}),a("label",{staticClass:"white"},[t._v("Uploader")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"mapping",checked:"checked"}}),a("label",{staticClass:"white"},[t._v("Mapping ("),a("i",[t._v("registered")]),t._v(" or "),a("i",[t._v("generated")]),t._v(" from inspection)")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grouped fields"},[a("div",{staticClass:"field"},[a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{type:"checkbox",name:"purge"}}),a("label",{staticClass:"white"},[t._v("Purge")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"eight wide column"},[a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),a("span",{attrs:{id:"exportcancel"}},[t._v("Cancel")])]),a("div",{staticClass:"ui green ok inverted button",attrs:{id:"exportok"}},[a("i",{staticClass:"checkmark icon"}),a("span",{attrs:{id:"exportok"}},[t._v("OK")])])])])}],K=(a("7f7f"),a("3361")),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.part?a("span",["dumper"==t.ptype?a("span",["ok"==t.part.status?a("span",{staticClass:"ui green tiny smallmsg message"},[t._v("\n            Dumper "),a("b",[t._v(t._s(t.part.class))]),t._v(" exported in file "),a("code",[t._v(t._s(t.part.file))])]):a("span",{staticClass:"ui red tiny smallmsg message"},[t._v("\n            "+t._s(t.part.message)+"\n        ")])]):t._e(),"uploader"==t.ptype?a("span",["ok"==t.part.status?a("span",{staticClass:"ui green tiny smallmsg message"},[t._v("\n            Uploader "),a("b",[t._v(t._s(t.part.class))]),t._v(" exported in file "),a("code",[t._v(t._s(t.part.file))])]):a("span",{staticClass:"ui red tiny smallmsg message"},[t._v("\n            "+t._s(t.part.message)+"\n        ")])]):t._e(),"mapping"==t.ptype?a("span",["ok"==t.part.status?a("span",{staticClass:"ui green tiny smallmsg message"},[t._v("\n            Mapping (origin "),a("b",[t._v(t._s(t.part.origin))]),t._v(") exported in file "),a("code",[t._v(t._s(t.part.file))])]):"warning"==t.part.status?a("span",{staticClass:"ui yellow tiny smallmsg message"},[t._v("\n            "+t._s(t.part.message)+"\n        ")]):a("span",{staticClass:"ui red tiny smallmsg message"},[t._v("\n            "+t._s(t.part.message)+"\n        ")])]):t._e()]):t._e()},N=[],J={name:"plugin-part-export",props:["part","ptype"],mounted:function(){},beforeDestroy:function(){},components:{},data:function(){return{}},methods:{}},z=J,F=(a("a62e"),Object(m["a"])(z,W,N,!1,null,"5559c2ea",null)),Y=F.exports,V={name:"data-source-plugin",mixins:[K["a"]],props:["source"],mounted:function(){},beforeDestroy:function(){$(".ui.basic.exportplugin.modal").remove()},components:{PluginPartExport:Y},data:function(){return{export_error:null,export_results:{}}},methods:{onUpdatePlugin:function(){var t=$(".ui.plugin.form.".concat(this.source._id)).form("get field","release"),e=null;return t&&(e=t.val()),this.dumpPlugin(e=e)},showExportResults:function(t){this.export_results=t.data.result,console.log(t)},onExportCode:function(){console.log("in onExportCode"),$("#exportok").show(),$("#exportcancel").text("Cancel"),this.export_results={};var t=this;$(".ui.basic.exportplugin.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){t.export_error=null;var e=[];$(".ui.exportform.form").form("get field","dumper").prop("checked")&&e.push("dumper"),$(".ui.exportform.form").form("get field","uploader").prop("checked")&&e.push("uploader"),$(".ui.exportform.form").form("get field","mapping").prop("checked")&&e.push("mapping");var a=$(".ui.exportform.form").form("get field","purge").prop("checked"),i={what:e,purge:a};return o.a.put(o.a.defaults.baseURL+"/dataplugin/".concat(t.source._id,"/export"),i).then(function(e){t.loaded(),t.showExportResults(e),$("#exportok").hide(),$("#exportcancel").text("Back"),$(".ui.basic.exportplugin.modal").modal("setting",{onDeny:function(){return console.log("ok on valide"),!0}})}).catch(function(e){console.log("Error exporting plugin: "+e),t.loaderror(e),t.export_error=e.data.error}),!1}}).modal("show")},dumpPlugin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=null;null!=t&&""!=t&&(e={release:t}),console.log(e),o.a.put(o.a.defaults.baseURL+"/dataplugin/".concat(this.source.name,"/dump"),e).then(function(t){console.log(t.data.result)}).catch(function(t){console.log("Error update plugin: "+t)})}}},G=V,H=(a("269c"),Object(m["a"])(G,T,q,!1,null,"f00d3998",null)),Q=H.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"ui fluid basic segment right aligned"},[a("button",{staticClass:"ui button mini",on:{click:t.$parent.inspect}},[a("i",{staticClass:"unhide icon"}),t._v("\n            Inspect data\n        ")])]),a("inspect-form",{attrs:{_id:t._id}}),t.maps?a("span",[Object.keys(t.maps).length>1?a("span",[a("p",[t._v("Found sub-sources linked to main source "),a("b",[t._v(t._s(t._id))]),t._v(", select one to see mapping")]),a("div",{staticClass:"ui top attached tabular menu",attrs:{id:"maps"}},t._l(t.maps,function(e,i,s){return a("a",{class:["green item",0===s?"active":""],attrs:{"data-tab":i}},[t._v(t._s(i))])}),0)]):t._e(),t._l(t.maps,function(e,i,s){return t.maps?a("div",{class:["ui bottom attached tab segment",0===s?"active":""],attrs:{"data-tab":i}},[a("p",[t._v("\n                These are the mappings for source "),a("b",[t._v(t._s(i))]),t._v(".\n            ")]),t._m(0,!0),a("p",[t._v("\n                Mappings can be manually edited and mapping from inspection can be saved as the new registered, active mapping.\n            ")]),t._m(1,!0),a("div",{staticClass:"ui grid"},[!t.maps[i]["inspect_mapping"]||t.maps[i]["inspect_mapping"]["errors"]||t.maps[i]["inspect_mapping"]["pre-mapping"]?t._e():a("div",{staticClass:"center aligned sixteen wide column"},[a("button",{staticClass:"ui labeled mini icon button",on:{click:function(e){return t.diffMapping("tab_mapping_inspected","tab_mapping_registered",i)}}},[a("i",{staticClass:"exchange icon"}),t._v("\n                        Diff\n                    ")])]),a("div",{staticClass:"eight wide column"},[t.maps[i]?a("mapping-map",{attrs:{entity:"source",map:t.maps[i]["inspect_mapping"],name:i,map_origin:"inspect",map_id:"tab_mapping_inspected",read_only:t.maps[i]["inspect_mapping"]&&t.maps[i]["inspect_mapping"]["pre-mapping"],can_commit:!t.maps[i]["registered_mapping"]||"uploader"!=t.maps[i]["registered_mapping"]["origin"]}}):t._e()],1),a("div",{staticClass:"eight wide column"},[t.maps[i]["registered_mapping"]?a("mapping-map",{attrs:{map:t.maps[i]["registered_mapping"]["mapping"],entity:"source",name:i,map_origin:"master",map_id:"tab_mapping_registered",read_only:t.maps[i]["registered_mapping"]&&"uploader"==t.maps[i]["registered_mapping"]["origin"],can_commit:!t.maps[i]["registered_mapping"]||"uploader"!=t.maps[i]["registered_mapping"]["origin"]}}):t._e()],1)])]):t._e()})],2):a("div",[t._v("\n        No mapping data found for this source.\n    ")])],1)},Z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("i",[t._v("Mapping from inspection")]),t._v(" has been generated during data inspection, while "),a("i",[t._v("Registered mapping")]),t._v(" is the actual active mapping, used during indexation.\n            ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui warning message"},[a("ul",{staticClass:"ui list"},[a("li",[t._v("If a mapping is hard-coded in source code, it can't be edited, saved or replaced.")]),a("li",[t._v("When testing a mapping, an temporary index is created on the selection ElasticSearch environment. That index is then deleted.")])])])}],tt=a("55b7"),et={name:"data-source-mapping",props:["_id","maps"],mixins:[tt["a"]],mounted:function(){$(".menu .item").tab()},components:{MappingMap:R["a"],InspectForm:c["a"]},data:function(){return{}},methods:{}},at=et,it=Object(m["a"])(at,X,Z,!1,null,null,null),st=it.exports,nt=a("6a96"),ot={name:"data-source-detailed",props:["_id"],components:{InspectForm:c["a"],DataSourceDump:v,DataSourceUpload:y,DataSourceInspect:B,DataSourcePlugin:Q,DataSourceMapping:st,DiffModal:nt["a"],Loader:K["a"]},mixins:[l["a"],K["a"]],mounted:function(){console.log("DataSourceDetailed mounted"),this.loadData(),$("select.dropdown").dropdown(),$(".menu .item").tab()},created:function(){r["a"].$on("change_source",this.loadData),r["a"].$on("change_master",this.loadData),r["a"].$on("change_data_plugin",this.loadData)},beforeDestroy:function(){r["a"].$on("change_source",this.loadData),r["a"].$off("change_master",this.loadData),r["a"].$on("change_data_plugin",this.loadData)},data:function(){return{source:null}},computed:{maps:function(){var t={};if(this.source.inspect&&this.source.inspect.sources)for(var e in this.source.inspect.sources)if(this.source.inspect.sources[e]["inspect"])for(var a in t[e]={},this.source.inspect.sources[e]["inspect"].results)t[e]["inspect_".concat(a)]=this.source.inspect.sources[e]["inspect"].results[a];for(var e in this.source.mapping)!e in t&&(t[e]={}),t[e]||(t[e]={}),t[e]["registered_mapping"]=this.source.mapping[e];return Object.keys(t).length?t:null},license:function(){return this.pick_metadata(["license"])},license_url:function(){return this.pick_metadata(["license_url","license_url_short"])},website:function(){return this.pick_metadata(["url"])}},methods:{loadData:function(){var t=this,e=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/source/".concat(this._id)).then(function(a){e.source=a.data.result,t.loaded()}).catch(function(e){console.log("Error getting source information: "+e),t.loaderror(e)})},pick_metadata:function(t){var e=null;function a(e){var a=null;for(var i in t)e[t[i]]&&(a=e[t[i]]);return a}if(this.source.__metadata__)if(Array.isArray(this.source.__metadata__))for(var i in e={},this.source.__metadata__){var s=this.source.__metadata__[i];for(var n in s){var o=a(s[n]);o&&(e[n]=o)}}else for(var r in this.source.__metadata__)e=a(this.source.__metadata__);return e}}},rt=ot,ct=(a("648d"),Object(m["a"])(rt,i,s,!1,null,null,null));e["a"]=ct.exports},"6a96":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui diff modal"},[t._m(0),a("div",{staticClass:"content"},[a("p",[t._v("Operations describe what is required to get from the data on the left, to the data on the right")]),a("json-diff-results")],1),t._m(1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui header"},[a("i",{staticClass:"exchange icon"}),t._v("\n        JSON diff results\n    ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui green ok button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n            OK\n        ")])])}],n=(a("bc3a"),a("f5ef")),o=a("f1f5"),r={components:{JsonDiffResults:o["a"]},created:function(){n["a"].$on("show_diffed",this.showDiffed)},beforeDestroy:function(){n["a"].$off("show_diffed",this.showDiffed),$(".ui.diff.modal").remove()},methods:{showDiffed:function(){$(".ui.diff.modal").modal({observeChanges:!0}).modal("show")}}},c=r,l=a("0c7c"),d=Object(l["a"])(c,i,s,!1,null,null,null);e["a"]=d.exports},"6dd5":function(t,e,a){},"6f4a":function(t,e,a){},"6f78":function(t,e,a){"use strict";var i=a("af85"),s=a.n(i);s.a},"77a4":function(t,e,a){},"7a6a":function(t,e,a){},"7df8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},s=[],n=(a("bc3a"),a("f5ef")),o={name:"base-build",mounted:function(){},components:{},created:function(){},beforeDestroy:function(){},computed:{},methods:{inspect:function(t){$(t.target).attr("data-build_id")==this.build._id&&n["a"].$emit("do_inspect",this.build._id)}}},r=o,c=(a("0530"),a("0c7c")),l=Object(c["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},"7e12":function(t,e,a){"use strict";var i=a("6dd5"),s=a.n(i);s.a},"86ff":function(t,e,a){},8704:function(t,e,a){"use strict";var i=a("7a6a"),s=a.n(i);s.a},"8ae6":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",["inspect"==t.map_origin?a("h3",{staticClass:"center aligned"},[t._v("Mapping from inspection")]):"master"==t.map_origin?a("h3",{staticClass:"center aligned"},[t._v("Registered mapping")]):"build"==t.map_origin?a("h3",{staticClass:"center aligned"},[t._v("Merged mapping")]):t._e(),a("div",{staticClass:"center aligned"},[!t.map||t.read_only||t.map["errors"]||t.map["pre-mapping"]?t._e():a("button",{staticClass:"ui labeled mini icon button",on:{click:function(e){return t.saveMapping()}}},[a("i",{staticClass:"save icon"}),t._v("\n            Save\n        ")]),t.map?a("div",{staticClass:"ui mini buttons"},[a("div",{staticClass:"ui labeled icon button",on:{click:function(e){return t.testMapping()}}},[a("i",{staticClass:"check square outline icon"}),t._v("Validate on "),a("span",{class:[t.name,t.map_id,"test-on"]},[t._v("...")])]),a("div",{class:["ui floating",t.map_id,"dropdown icon button"]},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"menu"})])]):t._e(),0!=t.can_commit&&"inspect"==t.map_origin?a("button",{staticClass:"ui labeled mini icon button",on:{click:function(e){return t.commitMapping()}}},[a("i",{staticClass:"angle double right icon"}),t._v("\n            Commit\n        ")]):t._e()]),t.dirty?a("div",{staticClass:"ui orange basic label"},[t._v("Edited")]):t._e(),a("br"),null!=t.mapping_msg?a("div",{class:["ui",t.mapping_error?"red":"green","label"]},[t.mapping_error?a("span",[t._v("\n            An error occured while validating this mapping:"),a("br"),a("code",[t._v(t._s(t.mapping_msg))])]):a("span",[t._v("\n            Mapping has successfully been validated.\n            "),a("code",[t._v(t._s(t.mapping_msg))])])]):t._e(),t.map?a("span",[t.has_errors?a("div",[t._m(0),a("div",{staticClass:"ui bulleted list"},t._l(t.map["errors"],function(e){return a("div",{staticClass:"item"},[a("b",[t._v(t._s(e))])])}),0),a("p",[t._v("Mapping can't be generated until those errors are fixed. Please fix the parser or the data and try again.")]),a("a",{staticClass:"ui grey label"},[t._v("For debugging purposes, below is a pre-mapping structure, where errors can be spot.")])]):t._e(),a("pre",{attrs:{id:t.name+"-"+t.map_id}},[t._v("        ")])]):a("div",{staticClass:"description"},[t._v("No mapping data")]),a("div",{staticClass:"ui modal",attrs:{id:"modal_"+t.name+"-"+t.map_id}},[a("div",{staticClass:"header"},[t._v("Modify indexing rules")]),a("input",{staticClass:"path",attrs:{type:"hidden"}}),a("div",{staticClass:"content"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"six wide column"},[t._m(1),a("p"),a("div",{staticClass:"index ui checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.indexed,expression:"indexed"}],attrs:{type:"checkbox",name:"index",id:"index_checkbox"},domProps:{checked:Array.isArray(t.indexed)?t._i(t.indexed,null)>-1:t.indexed},on:{change:function(e){var a=t.indexed,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);i.checked?o<0&&(t.indexed=a.concat([n])):o>-1&&(t.indexed=a.slice(0,o).concat(a.slice(o+1)))}else t.indexed=s}}}),a("label",[t._v("Index this field")])]),a("p"),a("p"),a("div",{class:["copy_to_all ui checkbox",t.indexed?"":"disabled"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.copied_to_all,expression:"copied_to_all"}],attrs:{type:"checkbox",name:"copy_to_all",id:"copy_to_all_checkbox"},domProps:{checked:Array.isArray(t.copied_to_all)?t._i(t.copied_to_all,null)>-1:t.copied_to_all},on:{change:function(e){var a=t.copied_to_all,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);i.checked?o<0&&(t.copied_to_all=a.concat([n])):o>-1&&(t.copied_to_all=a.slice(0,o).concat(a.slice(o+1)))}else t.copied_to_all=s}}}),a("label",[t._v("Search this field by default")])]),a("p"),a("p"),t._m(2),a("p"),a("p"),a("div",{staticClass:"six wide field"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.strsubmap,expression:"strsubmap"}],staticClass:"json",attrs:{rows:"5",id:"submap"},domProps:{value:t.strsubmap},on:{input:function(e){e.target.composing||(t.strsubmap=e.target.value)}}},[t._v(t._s(t.strsubmap))]),t.json_err?a("div",{staticClass:"ui mini negative message"},[a("p",[t._v("Invalid JSON format")])]):t._e()]),a("p")]),t._m(3)])]),t._m(4)]),a("div",{staticClass:"ui modal",attrs:{id:"modal_commit_"+t.name}},[t._m(5),t._m(6),t._m(7)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"ui orange label"},[a("i",{staticClass:"exclamation triangle icon"}),t._v("Found errors while generating the mapping:")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[t._v("\n                        Field: "),a("span",{staticClass:"key"}),a("br"),t._v("\n                        Path: "),a("span",{staticClass:"path"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index ui"},[a("label",[t._v("Change type")]),a("div",{staticClass:"ui selection estype dropdown",attrs:{id:"estype"}},[a("div",{staticClass:"text"}),a("i",{staticClass:"dropdown icon"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ten wide column"},[a("div",{staticClass:"ui list"},[a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[a("b",[t._v("Enable index")]),t._v(" allows a field to be searchable.\n                                    If indexing is disabled, values are still stored and returned in results,\n                                    but they can't be directly queried. Indexing takes disk space and can also\n                                    impact performances, only index fields which make sense to query.\n                                ")])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[t._v("\n                                    When "),a("b",[t._v("Search by default")]),t._v(" is enabled, field can be searched without specifying the full path.\n                                    "),a("i",[t._v("Note: _id field is an exception, path is not required.")]),a("br"),t._v("\n                                    Ex:\n                                    "),a("ul",{staticClass:"ui list"},[a("li",[t._v("When searching by default is disabled, searching "),a("b",[a("span",{staticClass:"key"})]),t._v(" field requires to specify the full path:"),a("br"),a("code",[t._v("/query?q="),a("b",[a("span",{staticClass:"path"}),t._v(":value_to_search")])])]),a("li",[t._v("When searching by default is enabled, path can be omitted, "),a("i",[t._v("value_to_search")]),t._v(" will be searched\n                                            in all fields declared as searchable by default."),a("br"),a("code",[t._v("/query?q="),a("b",[t._v("value_to_search")])]),t._v(".\n                                        ")])])])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[t._v("\n                                  ElasticSearch field data type can be changed if needed. See \n                                  "),a("a",{attrs:{target:"_blank",href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html"}},[t._v("\n                                    Field datatypes\n                                  ")]),t._v(" for more information.\n                                  "),a("i",[t._v("Note: only core datatypes are available in this list ")])])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"description"},[t._v("\n                                    Field definition can also be manually specificed in the text box, using JSON notation, for more advanced usage.\n                                ")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel button"},[a("i",{staticClass:"remove icon"}),t._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                OK\n            ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"angle double right icon"}),t._v("\n            Commit new mapping\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("p",[t._v("Are you sure you want to commit mapping from inspection?")]),a("p",[t._v("This will be replace current registered one.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel button"},[a("i",{staticClass:"remove icon"}),t._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                Yes\n            ")])])}],n=(a("ac6a"),a("456d"),a("7618")),o=(a("28a5"),a("a481"),a("7f7f"),a("bc3a")),r=a.n(o),c=a("f5ef"),l=a("2b0e"),d=a("3e54"),u={name:"mapping-map",props:["map_id","map","name","read_only","map_origin","can_commit","entity"],mixins:[d["a"]],mounted:function(){console.log("MappingMap mounted"),this.htmlmap(),$(".ui.checkbox").checkbox(),this.$forceUpdate(),this.buildIndexDropdown()},filters:{log:function(t){return console.log("in log ".concat(t)),t}},created:function(){c["a"].$on("reload_mapping_map",this.$forceUpdate),c["a"].$on("mapping_test_".concat(this.map_id,"-").concat(this.name),this.displayMappingTestResult)},beforeDestroy:function(){c["a"].$off("reload_mapping_map",this.$forceUpdate),c["a"].$off("mapping_test_".concat(this.map_id,"-").concat(this.name),this.displayMappingTestResult)},data:function(){return{path:[],submap:{},dirty:!1,mapping_error:!1,mapping_msg:null,environments:{},estypes:["text","keyword","long","integer","short","byte","double","float","half_float","scaled_float","date","boolean","binary","integer_range","float_range","long_range","double_range","date_range"],selected_type:null,json_err:!1,tmp_strsubmap:null}},computed:{strmap:function(){return JSON.stringify(this.map)},strsubmap:{get:function(){return this.tmp_strsubmap?this.tmp_strsubmap:JSON.stringify(this.submap,null,2)},set:function(t){try{this.submap=JSON.parse(t),this.json_err=!1,this.tmp_strsubmap=null}catch(e){this.json_err=!0,this.tmp_strsubmap=t}}},indexed:{cache:!1,get:function(){return!("index"in this.submap&&!1===this.submap["index"])},set:function(t){t?$("#modal_".concat(this.name,"-").concat(this.map_id," .copy_to_all")).removeClass("disabled"):$("#modal_".concat(this.name,"-").concat(this.map_id," .copy_to_all")).addClass("disabled"),this.updateSubMap()}},copied_to_all:{cache:!1,get:function(){return"copy_to"in this.submap&&-1!=this.submap["copy_to"].indexOf("all")},set:function(t){this.updateSubMap()}},current_type:{cache:!1,get:function(){return this.submap["type"]},set:function(t){}},has_errors:function(){return"pre-mapping"in this.map&&"errors"in this.map}},watch:{submap:function(t,e){t!=e&&this.$forceUpdate()},map:function(t,e){t!=e&&this.htmlmap()}},components:{},methods:{generateField:function(t,e,a,i){return i?"<a class='mapkey leaf' id='".concat(a,"/").concat(e,"' map_id='").concat(t,"'>").concat(e,"</a>"):"<span class='non-leaf'>".concat(e,"</span>")},walkSubMap:function(t,e,a){e.length?1==e.length&&a?(t[e[0]]=a,this.htmlmap()):this.walkSubMap(t[e[0]],e.slice(1),a):this.submap=t},updateSubMap:function(){var t=$("#modal_".concat(this.name,"-").concat(this.map_id," #index_checkbox")).is(":checked"),e=$("#modal_".concat(this.name,"-").concat(this.map_id," #copy_to_all_checkbox")).is(":checked");$("#modal_".concat(this.name,"-").concat(this.map_id," input.path")).val();if("properties"in this.submap)throw new Error("Only 'leaf' keys can be modified");e?l["a"].set(this.submap,"copy_to",["all"]):l["a"].delete(this.submap,"copy_to"),t?l["a"].delete(this.submap,"index"):(l["a"].set(this.submap,"index",!1),l["a"].delete(this.submap,"copy_to")),l["a"].set(this.submap,"type",this.selected_type)},modifyMapKey:function(t){var e=this,a=t.currentTarget.innerText,i=t.currentTarget.id,s=t.currentTarget.getAttribute("map_id");if("".concat(this.name,"-").concat(this.map_id)==s){$("#modal_".concat(this.name,"-").concat(this.map_id," span.key")).html(a),$("#modal_".concat(this.name,"-").concat(this.map_id," input.path")).val(i),$("#modal_".concat(this.name,"-").concat(this.map_id," span.path")).html(i.slice(1).replace(/\//g,".").replace(".properties",""));var n=i.split("/").slice(1);this.walkSubMap(this.map,n);var o=this,r=[];r=this.estypes.map(function(t){return{name:t,value:t,selected:t==e.current_type}}),$(".ui.estype.dropdown").dropdown({values:r,onChange:function(t,e,a){o.selected_type=t,o.updateSubMap()}}),$("#modal_".concat(this.name,"-").concat(this.map_id)).modal("setting",{onApprove:function(){o.walkSubMap(o.map,i.split("/").slice(1),o.submap),o.dirty=!0,o.$forceUpdate()}}).modal("show")}},htmlmap:function(){if(this.map){var t=JSON.parse(JSON.stringify(this.map));if(!this.read_only){var e=this,a=function t(e,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";for(var s in e){var o=a.apply(this,[s,e[s],e,i]);null!==e[s]&&"object"==Object(n["a"])(e[s])&&(t(e[s],a,"".concat(i,"/").concat(s)),o&&delete e[s])}};e=this;a(t,function(t,a,i,s){if("object"==Object(n["a"])(a)&&-1==["properties","copy_to"].indexOf(t)){var o=!0;"properties"in i[t]&&(o=!1);var r=e.generateField("".concat(e.name,"-").concat(e.map_id),t,s,o);return i[r]=a,!0}return!1})}this.read_only&&this.has_errors&&"pre-mapping"in this.map?$("#".concat(this.name,"-").concat(this.map_id)).text(JSON.stringify(this.map["pre-mapping"],null,4)):($("#".concat(this.name,"-").concat(this.map_id)).html(JSON.stringify(t,null,4)),$(".mapkey").bind("click",this.modifyMapKey))}},cleaned:function(){this.dirty=!1},displayMappingTestResult:function(t,e){this.mapping_error="error"==e,this.mapping_msg=t},saveMapping:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=$("#".concat(this.name,"-").concat(this.map_id)).html(),i=this.html2json(a);e||(e=this.map_origin),console.log("Saving mapping for ".concat(this.name," dest:").concat(e)),r.a.put(r.a.defaults.baseURL+"/".concat(this.entity,"/").concat(this.name,"/mapping"),{mapping:i,dest:e}).then(function(e){console.log(e.data.result),t.cleaned()}).catch(function(t){console.log("Error : "+t)})},commitMapping:function(){var t=this,e="source"==this.entity?"master":"build";$("#modal_commit_".concat(t.name)).modal("setting",{onApprove:function(){t.saveMapping(e)}}).modal("show")},testMapping:function(){var t=this,e=$("#".concat(this.name,"-").concat(this.map_id)).html(),a={root_key:{properties:this.html2json(e)}},i=$(".".concat(this.name,".").concat(this.map_id,".test-on")).text();r.a.post(r.a.defaults.baseURL+"/mapping/validate",{mapping:a,env:i}).then(function(e){console.log(e.data.result),c["a"].$emit("mapping_test_".concat(t.map_id,"-").concat(t.name),"","info")}).catch(function(e){console.log("Error validating mapping: "),console.log(e),c["a"].$emit("mapping_test_".concat(t.map_id,"-").concat(t.name),e.data.error,"error")})},buildIndexDropdown:function(){var t=this,e=this;r.a.get(r.a.defaults.baseURL+"/index_manager").then(function(a){t.environments=Object.keys(a.data.result.env);var i=[],s=0;for(var n in t.environments){var o={name:t.environments[n],value:t.environments[n]};0==s&&(o["selected"]=!0),i.push(o),s++}$(".ui.".concat(e.map_id,".dropdown")).dropdown({values:i,onChange:function(t,a,i){$(".".concat(e.map_id,".test-on")).text("".concat(t))}})}).catch(function(t){console.log("Error getting index environments: "+t)})}}},_=u,p=(a("7e12"),a("0c7c")),m=Object(p["a"])(_,i,s,!1,null,null,null);e["a"]=m.exports},"93a4":function(t,e,a){},9704:function(t,e,a){},a59c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.build.jobs?a("div",{staticClass:"ui small feed"},[a("div",{staticClass:"event"},[a("i",{staticClass:"ui hourglass start icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[t._v("\n                Build starts\n                "),a("div",{staticClass:"date"},[t._v("\n                    "+t._s(t._f("moment")(t.build.started_at,"MMM Do YYYY, h:mm:ss a"))+"\n                ")])])])]),t._l(t.build.jobs,function(e){return a("div",{staticClass:"event"},["success"==e.status?a("i",{staticClass:"ui green checkmark icon"}):"failed"==e.status?a("i",{staticClass:"ui red warning sign icon"}):"inspecting"==e.status?a("i",{staticClass:"ui pulsing unhide icon"}):"diffing"==e.status?a("i",{staticClass:"ui pulsing exchange icon"}):"indexing"==e.status?a("i",{staticClass:"ui pulsing bookmark icon"}):a("i",{staticClass:"ui pulsing cube icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[t._v("\n                "+t._s(e.step)+"\n                "),a("div",{staticClass:"date"},[t._v("\n                    "+t._s(e.time)+"\n                ")])]),e.sources?a("div",{staticClass:"meta"},[a("i",{staticClass:"database icon"}),t._v(t._s(e.sources.join(", "))+"\n            ")]):t._e(),e.err?a("div",{staticClass:"meta"},[a("i",{staticClass:"warning icon"}),t._v(t._s(e.err)+"\n            ")]):t._e()])])})],2):t._e()},s=[],n=(a("bc3a"),a("f5ef"),{name:"build-logs",props:["build"],mounted:function(){},beforeDestroy:function(){},components:{},methods:{}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,i,s,!1,null,"586d6cf2",null);e["a"]=c.exports},a62e:function(t,e,a){"use strict";var i=a("feaa"),s=a.n(i);s.a},af85:function(t,e,a){},b28c:function(t,e,a){"use strict";var i=a("65a2"),s=a.n(i);s.a},b58d:function(t,e,a){},b6a7:function(t,e,a){},bc46:function(t,e,a){},bc6b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"choosehub ui floating dropdown mini icon button"},[a("i",{staticClass:"caret square down icon"}),a("div",{staticClass:"menu largechoose"},[t._m(0),Object.keys(t.existings).length?a("div",{staticClass:"divider"}):t._e(),Object.keys(t.existings).length?a("div",{staticClass:"header"},[t._v("\n                Existing connections\n            ")]):t._e(),Object.keys(t.existings).length?a("div",{staticClass:"scrolling menu"},t._l(t.existings,function(e){return a("div",{staticClass:"item",attrs:{"data-value":e.name}},[a("img",{staticClass:"hubicon",attrs:{src:e.icon}}),a("b",[t._v(t._s(e.name))]),a("a",{staticClass:"bluelink"},[t._v(t._s(e.url))]),a("i",{staticClass:"grey trash alternate outline icon right floated",on:{click:function(a){return t.deleteConnection(a,e)}}})])}),0):t._e()])]),t._m(1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item",attrs:{"data-value":"new"}},[a("i",{staticClass:"plus circle icon"}),a("b",[t._v("Create new connection")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui basic newhuburl modal"},[a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"plug icon"}),t._v("\n            Create a new connection\n        ")]),a("div",{staticClass:"ui newhuburl form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"required ten wide field"},[a("input",{attrs:{type:"text",id:"huburl",placeholder:"Hub address",autofocus:""}})])])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                OK\n            ")])])])}],n=(a("7f7f"),a("f559"),a("a481"),a("bc3a")),o=a.n(n),r=a("f5ef"),c=a("2b0e"),l={name:"choose-hub",props:[],mounted:function(){console.log("ChooseHub mounted"),this.getExistings();var t=this;$(".choosehub.ui.floating.dropdown").dropdown({onChange:function(e,a,i){if("new"==e)t.newConnection();else{var s=t.existings[e],n=s["url"].replace(/\/$/,"");t.refreshConnection(n),s?r["a"].$emit("connect",s,"/"):console.log("Can't find connection details for ".concat(e))}}})},created:function(){},beforeDestroy:function(){$(".ui.basic.newhuburl.modal").remove()},data:function(){return{existings:{}}},mixins:[],components:{},computed:{},methods:{buildConnections:function(){},getExistings:function(){var t=c["a"].localStorage.get("hub_connections");t=t?JSON.parse(t):{},this.existings=t},refreshConnection:function(t){var e=this;t.startsWith("http")||(t="http://".concat(t)),o.a.get(t).then(function(a){var i=a.data.result;e.getExistings(),i["url"]=t.replace(/\/$/,""),i["name"]||(i["name"]=e.$parent.default_conn["name"]),i["icon"]||(i["icon"]=e.$parent.default_conn["icon"]),e.existings[i["name"]]=i,c["a"].localStorage.set("hub_connections",JSON.stringify(e.existings)),o.a.defaults.baseURL=t,r["a"].$emit("connect",i,"/")}).catch(function(t){console.log(t),console.log("Error creating new connection: "+t.data.error)})},newConnection:function(){var t=this;$(".ui.basic.newhuburl.modal").modal("setting",{detachable:!1,onApprove:function(){var e=$(".ui.newhuburl.form").form("get field","huburl").val();t.refreshConnection(e)}}).modal("show")},deleteConnection:function(t,e){t.stopPropagation(),console.log(t),console.log('Delete connection named "'.concat(e.name,'"')),delete this.existings[e.name],c["a"].localStorage.set("hub_connections",JSON.stringify(this.existings)),console.log(this.existings),this.getExistings()}}},d=l,u=(a("5988"),a("0c7c")),_=Object(u["a"])(d,i,s,!1,null,"5096dafa",null);e["a"]=_.exports},cadf5:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"apis"}},[a("div",{staticClass:"ui left vertical labeled icon small inverted sidebar menu"},[a("a",{staticClass:"item",on:{click:t.createAPI}},[t._m(0),a("br"),a("br"),a("div",[t._v("New API")])])]),a("div",{staticClass:"pusher"},[a("div",{staticClass:"ui main container"},[t._m(1),a("div",{staticClass:"ui centered grid"},t._l(t.apis,function(t){return a("div",{staticClass:"ui five wide column"},[a("api",{attrs:{api:t}})],1)}),0)])]),a("div",{staticClass:"ui basic createapi modal"},[t._m(2),a("div",{staticClass:"content"},[a("div",{staticClass:"ui form"},[a("div",{staticClass:"ui centered grid"},[a("div",{staticClass:"eight wide column"},[a("label",[t._v("Enter a name for the API")]),a("input",{attrs:{type:"text",name:"api_id",placeholder:"API name",autofocus:""}}),a("br"),a("br"),a("label",[t._v("Enter a description for the API (optional)")]),a("input",{attrs:{type:"text",name:"description",placeholder:"Description"}}),a("br"),a("br"),a("label",[t._v("Select a backend the API will connect to to serve the data")]),a("div",[a("select",{staticClass:"ui fluid apibackends dropdown",attrs:{name:"api_backend"}},t._l(t.backends,function(e){return t.backends.length?a("option",{attrs:{"data-es_host":e.host,"data-index":e.index,"data-doc_type":e.doc_type}},[t._v(t._s(e.env)+" ("+t._s(e.host)+" | "+t._s(e.index)+")")]):t._e()}),0),a("br"),a("br")]),a("label",[t._v("Specify a port")]),a("input",{attrs:{type:"text",name:"port",placeholder:"API port"}}),a("br"),a("br")]),a("div",{staticClass:"eight wide column"})])])]),t.errors.length?a("div",{staticClass:"ui error message"},[a("ul",{staticClass:"ui list"},t._l(t.errors,function(e){return a("li",[t._v(t._s(e))])}),0)]):t._e(),t._m(3)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i",{staticClass:"big icons"},[a("i",{staticClass:"shield icon"}),a("i",{staticClass:"huge corner add icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui segment"},[a("div",{staticClass:"ui secondary small menu"},[a("a",{staticClass:"item",attrs:{id:"side_menu"}},[a("i",{staticClass:"sidebar icon"}),t._v("\n                        Menu\n                    ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"shield icon"}),t._v("\n            Create new API\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                OK\n            ")])])}],n=a("bc3a"),o=a.n(n),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui fluid card"},[a("div",{staticClass:"content"},["running"==t.api.status?a("div",{staticClass:"ui tiny red label right floated"},[t._v("running")]):t._e(),a("div",{staticClass:"ui",attrs:{"data-tooltip":t.displayError()}},["failed"==t.api.status?a("i",{staticClass:"right floated red alarm icon pulsing"}):t._e()]),a("div",{staticClass:"left aligned header",model:{value:t.api,callback:function(e){t.api=e},expression:"api"}},[a("a",[t._v(t._s(t.api._id))])]),a("div",{staticClass:"left aligned description"},["running"==t.api.status?a("div",[a("div",{staticClass:"ui bulleted list"},[a("div",{staticClass:"item"},[t._v("Metadata: "),a("a",{attrs:{href:t.url_metadata}},[t._v(t._s(t.url_metadata))])]),a("div",{staticClass:"item"},[t._v("Query: "),a("a",{attrs:{href:t.url_query}},[t._v(t._s(t.url_query))])])])]):t._e()]),a("div",{staticClass:"meta"}),a("div",{staticClass:"ui clearing divider"}),a("div",{staticClass:"left aligned description"},[a("p",{staticClass:"center aligned"},[a("b",[t._v(t._s(t.api.description))])]),a("p",[a("table",{staticClass:"ui celled table"},[a("tbody",[a("tr",[a("td",[t._v("ElasticSearch host")]),a("td",[a("a",{attrs:{href:t.api.config.es_host}},[t._v(t._s(t.api.config.es_host))])])]),a("tr",[a("td",[t._v("Index")]),a("td",[t._v(t._s(t.api.config.index))])]),a("tr",[a("td",[t._v("Document type")]),a("td",[t._v(t._s(t.api.config.doc_type))])]),a("tr",[a("td",[t._v("API port")]),a("td",[t._v(t._s(t.api.config.port))])])])])])])]),a("div",{staticClass:"extra content"},["running"!=t.api.status?a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",on:{click:t.startAPI}},[a("i",{staticClass:"play icon"})])]):a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",on:{click:t.stopAPI}},[a("i",{staticClass:"stop icon"})])]),a("div",{staticClass:"ui icon buttons right floated mini"},[a("button",{staticClass:"ui button"},[a("i",{staticClass:"trash icon",attrs:{"data-api_id":t.api._id},on:{click:function(e){return t.deleteAPI(e)}}})])])]),a("div",{staticClass:"ui basic deleteapi modal",attrs:{id:t.api._id}},[t._m(0),a("div",{staticClass:"content"},[a("p",[t._v("Are you sure you want to delete API "),a("b",[t._v(t._s(t.api._id))]),t._v(" ?")])]),t._m(1)])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),t._v("\n            Delete API\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                Yes\n            ")])])}],l=(a("a481"),a("f5ef")),d=a("3361"),u=a("de0c"),_={name:"api",mixins:[d["a"]],props:["api"],mounted:function(){$(".menu .item").tab()},beforeDestroy:function(){$("#".concat(this.api._id,".ui.basic.deleteapi.modal")).remove()},data:function(){return{errors:[]}},components:{InspectForm:u["a"]},computed:{url_metadata:function(){return this.api.url+"/metadata"},url_query:function(){return this.api.url+"/query?q=*"}},methods:{displayError:function(){var t=[];return this.api.err&&t.push(this.api.err),t.join("<br>")},deleteAPI:function(t){console.log(t);var e=$(t.target).attr("data-api_id");if(console.log("".concat(e," ").concat(this.api._id)),e&&e==this.api._id){var a=this;$("#".concat(this.api._id.replace(".","\\."),".ui.basic.deleteapi.modal")).modal("setting",{onApprove:function(){a.loading(),o.a.delete(o.a.defaults.baseURL+"/api",{data:{api_id:a.api._id}}).then(function(t){return console.log(t.data.result),a.loaded(),!0}).catch(function(t){console.log(t),console.log("Error deleting api: "+t.data.error),a.loaderror(t)})}}).modal("show")}else console.log("nope")},startStopAPI:function(t){var e=this;this.loading(),o.a.put(o.a.defaults.baseURL+"/api/".concat(this.api._id,"/").concat(t)).then(function(t){e.loaded(),console.log(t.data.result)}).catch(function(a){console.log(a),console.log("Error ".concat(t,"ing api: ")+a.data.error),e.loaderror(a)})},startAPI:function(){return this.startStopAPI("start")},stopAPI:function(){return this.startStopAPI("stop")}}},p=_,m=(a("cb87"),a("0c7c")),f=Object(m["a"])(p,r,c,!1,null,"829a51a4",null),v=f.exports,h={name:"api-grid",mixins:[d["a"]],mounted:function(){console.log("ApiGrid mounted"),$(".ui.apibackends.dropdown").dropdown(),$("#apis .ui.sidebar").sidebar({context:$("#apis")}).sidebar("setting","transition","overlay").sidebar("attach events","#side_menu"),$(".ui.form").form()},updated:function(){},created:function(){this.getApis(),l["a"].$on("change_api",this.onApiChanged)},beforeDestroy:function(){$(".ui.basic.createapi.modal").remove(),l["a"].$off("change_api",this.onApiChanged)},watch:{},data:function(){return{apis:[],errors:[],backends:[]}},components:{Api:v},methods:{getApis:function(){var t=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/api/list").then(function(e){t.apis=e.data.result,t.loaded()}).catch(function(e){console.log("Error getting APIs information: "+e),t.loaderror(e)})},onApiChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getApis()},createAPI:function(){$("#apis .ui.sidebar").sidebar("hide");var t=this;t.loading(),o.a.get(o.a.defaults.baseURL+"/index_manager?remote=1").then(function(e){t.backends=[];var a=e.data.result;$.each(a.env,function(e,a){var i=function(i){for(var s in i)t.backends.push({env:e,host:a["host"],index:i[s]["index"],doc_type:i[s]["doc_type"]})};if(Array.isArray(a.index)){var s=a.index;i(s)}else for(var n in a.index){s=a.index[n];i(s)}}),$(".ui.apibackends.dropdown").dropdown(),t.loaded()}).catch(function(e){console.log("Error getting index environments: "),console.log(e),t.loaderror(e)}),$(".ui.basic.createapi.modal").modal("setting",{detachable:!1,onApprove:function(){t.errors=[];var e=$(".ui.form input[name=api_id]").val(),a=$(".ui.form input[name=description]").val(),i=$(".ui.form select[name=api_backend] :selected"),s=$(i).attr("data-es_host"),n=$(i).attr("data-index"),r=$(i).attr("data-doc_type"),c=parseInt($(".ui.form input[name=port]").val());if(e||t.errors.push("Provide a name for the API"),c||t.errors.push("Provide a port number"),t.errors.length)return!1;t.loading(),o.a.post(o.a.defaults.baseURL+"/api",{api_id:e,es_host:s,index:n,doc_type:r,port:c,description:a}).then(function(e){return console.log(e.data.result),t.loaded(),e.data.result}).catch(function(e){console.log("Error creating API: "),console.log(e),t.loaderror(e)})}}).modal("show")}}},g=h,b=(a("d922"),Object(m["a"])(g,i,s,!1,null,null,null));e["a"]=b.exports},cb87:function(t,e,a){"use strict";var i=a("77a4"),s=a.n(i);s.a},d18a:function(t,e,a){},d2f5:function(t,e,a){"use strict";var i=a("54d7"),s=a.n(i);s.a},d3ef:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"sources"}},[a("div",{staticClass:"ui left vertical labeled icon small inverted sidebar menu"},[a("a",{staticClass:"item",on:{click:t.register}},[a("i",{staticClass:"plug icon"}),t._v("\n            New data plugin\n        ")])]),a("div",{staticClass:"pusher"},[a("div",{staticClass:"ui main container"},[t._m(0),a("div",{staticClass:"ui grid",attrs:{id:"data-source-grid"}},t._l(t.orderedSources,function(t){return a("div",{staticClass:"four wide column"},[a("data-source",{attrs:{psource:t}})],1)}),0)])]),t._m(1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui segment left aligned"},[a("div",{staticClass:"ui secondary small menu"},[a("a",{staticClass:"item"},[a("i",{staticClass:"sidebar icon"}),t._v("\n                        Menu\n                    ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui basic newdatasource modal"},[a("h3",{staticClass:"ui icon"},[a("i",{staticClass:"plug icon"}),t._v("\n            Register a new datasource\n        ")]),a("div",{staticClass:"content"},[a("p",[t._v("Specify a repository type and URL")])]),a("div",{staticClass:"ui newdataplugin form"},[a("div",{staticClass:"fields"},[a("div",{staticClass:"required four wide field"},[a("select",{staticClass:"ui dropdown"},[a("option",{attrs:{"data-value":"github",selected:""}},[t._v("Github")])])]),a("div",{staticClass:"required ten wide field"},[a("input",{attrs:{type:"text",id:"repo_url",placeholder:"Repository URL",autofocus:""}})])])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                Cancel\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                OK\n            ")])])])}],n=a("bc3a"),o=a.n(n),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui card",attrs:{id:"data-source"}},[a("div",{staticClass:"content"},[t.source.locked?a("i",{staticClass:"right floated lock icon blue"}):t._e(),"uploading"==t.upload_status?a("i",{staticClass:"right floated database icon pulsing"}):t._e(),"downloading"==t.download_status?a("i",{staticClass:"right floated cloud download icon pulsing"}):t._e(),"inspecting"==t.inspect_status?a("i",{staticClass:"right floated unhide icon pulsing"}):t._e(),a("div",{staticClass:"ui",attrs:{"data-tooltip":t.getAllErrors()}},[-1!=[t.download_status,t.upload_status,t.inspect_status].indexOf("failed")?a("i",{staticClass:"right floated red alarm icon pulsing"}):t._e()]),t.source.name?a("div",{staticClass:"left aligned header"},[a("router-link",{attrs:{to:"/source/"+t.source._id}},[a("a",[t._v(t._s(t.source.name))])])],1):t._e(),a("div",{staticClass:"meta"},[t.source.download&&t.source.download.started_at?a("span",{staticClass:"right floated time"},[t._v("Updated "+t._s(t._f("moment")(t.source.download.started_at,"from","now")))]):a("span",{staticClass:"right floated time"},[t._v("Never updated")]),a("span",{staticClass:"left floated category"},[t._v(t._s(t.release))])]),a("div",{staticClass:"left aligned description"},[a("p"),a("div",{staticClass:"ui clearing divider"}),a("div",[a("i",{staticClass:"file outline icon"}),t._v("\n                    "+t._s(t._f("currency")(t.source.count,"",0))+" document"+t._s(t.source.count>1?"s":"")+"\n                ")]),a("p")])]),a("div",{staticClass:"extra content"},[t.source.data_plugin&&t.source.data_plugin.error?a("span",[a("div",{staticClass:"plugin-error"},[a("i",{staticClass:"red alarm icon"}),t._v("\n                "+t._s(t.source.data_plugin.error)+"\n            ")])]):a("span",[a("div",{staticClass:"ui icon buttons left floated mini"},[t.source.download?a("button",{staticClass:"ui button",on:{click:t.do_dump}},[a("i",{staticClass:"download cloud icon"})]):t._e(),t.source.upload?a("button",{staticClass:"ui button",on:{click:t.do_upload}},[a("i",{staticClass:"database icon"})]):t._e()]),a("div",{staticClass:"ui icon buttons left floated mini"},[a("button",{staticClass:"ui button",on:{click:t.inspect}},[a("i",{staticClass:"unhide icon"})])])]),a("div",{staticClass:"ui icon buttons right floated mini"},[t.source.data_plugin?a("button",{staticClass:"ui button",on:{click:t.unregister}},[a("i",{staticClass:"trash icon"})]):t._e()])]),a("inspect-form",{attrs:{_id:t.source._id,select_data_provider:!0}}),t.source.data_plugin?a("div",{class:[t.source.name,"ui basic unregister modal"]},[a("input",{staticClass:"plugin_url",attrs:{type:"hidden"},domProps:{value:t.source.data_plugin.plugin.url}}),t._m(0),a("div",{staticClass:"content"},[a("p",[t._v("Are you sure you want to unregister and delete data plugin "),a("b",[t._v(t._s(t.source.name))]),t._v(" ?")])]),t._m(1)]):t._e()],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui icon header"},[a("i",{staticClass:"remove icon"}),t._v("\n            Unregister data plugin\n        ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n                No\n            ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n                Yes\n            ")])])}],l=a("f5ef"),d=a("de0c"),u=a("dc15"),p={name:"data-source",props:["psource"],components:{InspectForm:d["a"]},mixins:[u["a"]],mounted:function(){$("select.dropdown").dropdown()},data:function(){return{source_from_api:null}},computed:{source:function(){return this.source_from_api||this.psource}},methods:{do_dump:function(){return this.dump()},do_upload:function(){return console.log("do_upload"),this.upload()}}},m=p,f=(a("de8f"),a("0c7c")),v=Object(f["a"])(m,r,c,!1,null,null,null),h=v.exports,g=a("3361"),b={name:"data-source-grid",mixins:[g["a"]],mounted:function(){console.log("DataSourceGrid mounted"),this.getSourcesStatus(),$("select.dropdown").dropdown(),$("#sources .ui.sidebar").sidebar({context:$("#sources")}).sidebar("setting","transition","overlay").sidebar("attach events","#sources .menu .item")},created:function(){l["a"].$on("change_data_plugin",this.onDataPluginChanged)},beforeDestroy:function(){l["a"].$off("change_data_plugin",this.onDataPluginChanged),$(".ui.basic.newdatasource.modal").remove()},data:function(){return{sources:[],errors:[]}},computed:{orderedSources:function(){return _.orderBy(this.sources,"name")}},components:{DataSource:h},methods:{getSourcesStatus:function(){var t=this;this.loading(),o.a.get(o.a.defaults.baseURL+"/sources").then(function(e){t.sources=e.data.result,t.loaded()}).catch(function(e){console.log("Error getting sources information: "+e),t.loaderror(e)})},register:function(){this.loading();var t=this;$(".ui.basic.newdatasource.modal").modal("setting",{detachable:!1,closable:!1,onApprove:function(){var e=$(".ui.newdataplugin.form").form("get field","repo_url").val();o.a.post(o.a.defaults.baseURL+"/dataplugin/register_url",{url:e}).then(function(e){return console.log(e.data.result),t.loaded(),!0}).catch(function(e){console.log(e),console.log("Error registering repository URL: "+e.data.error),t.loaderror(e)})}}).modal("show")},onDataPluginChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSourcesStatus()}}},C=b,w=Object(f["a"])(C,i,s,!1,null,null,null);e["a"]=w.exports},d922:function(t,e,a){"use strict";var i=a("0e14"),s=a.n(i);s.a},dc15:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},s=[],n=(a("7514"),a("7f7f"),a("bc3a")),o=a.n(n),r=a("f5ef"),c={name:"base-data-source",mounted:function(){},components:{},created:function(){r["a"].$on("change_source",this.onSourceChanged)},beforeDestroy:function(){r["a"].$off("change_source",this.onSourceChanged),$(".ui.basic.unregister.modal").remove()},data:function(){return{limit_error:null,sample_error:null}},computed:{inspect_status:function(){return this.getStatus("inspect")},upload_status:function(){return this.getStatus("upload")},download_status:function(){return this.source.download&&this.source.download.status?this.source.download.status:"unknown status"},inspect_error:function(){var t=[];if(this.source["inspect"]){var e=this.source["inspect"]["sources"];for(var a in e)if(e[a]["inspect"]){var i=e[a]["inspect"]["results"];for(var s in i)i[s]["errors"]&&Array.prototype.push.apply(t,i[s]["errors"])}}return t},upload_error:function(){return this.getError("upload")},download_error:function(){if(this.source.download&&this.source.download.error)return this.source.download.error},release:function(){if(this.source.download)return this.source.download.release;if(this.source.upload){var t=[];return $(this.source.upload.sources).each(function(){t.push(this.release)}),t.length>1?"Multiple versions":1==t.length?t[0]:"?"}return"Unknown"}},methods:{getStatus:function(t){var e="unknown";if(this.source.hasOwnProperty(t))for(var a in this.source[t].sources){if(-1!=["failed","inspecting","uploading"].indexOf(this.source[t].sources[a]["status"])){e=this.source[t].sources[a]["status"];break}e=this.source[t].sources[a]["status"]}return e},getError:function(t){var e=[];if(this.source.hasOwnProperty(t))for(var a in this.source[t].sources)this.source[t].sources[a]["error"]&&e.push(this.source[t].sources[a]["error"]);return e},getAllErrors:function(){var t=[];return this.download_error&&t.push("Dump"),this.upload_error.length&&t.push("Upload"),this.inspect_error.length&&t.push("Inspect"),t.join(" - ")+" error"},dump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={};null!=t&&t&&(a["release"]=t),null!=e&&(a["force"]=e),o.a.put(o.a.defaults.baseURL+"/source/".concat(this.source.name,"/dump"),a).then(function(t){console.log(t.data.result)}).catch(function(t){console.log("Error getting job manager information: "+t)})},upload:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.source.name;null!=t&&(e+="."+t),o.a.put(o.a.defaults.baseURL+"/source/".concat(e,"/upload")).then(function(t){console.log(t.data.result)}).catch(function(t){console.log("Error getting job manager information: "+t)})},unregister:function(){$(".".concat(this.source.name,".ui.basic.unregister.modal")).modal("setting",{onApprove:function(){var t=$(this).find("input.plugin_url").val();o.a.delete(o.a.defaults.baseURL+"/dataplugin/unregister_url",{data:{url:t}}).then(function(t){return console.log(t.data.result),!0}).catch(function(t){console.log(t),console.log("Error unregistering repository URL: "+t.data.error)})}}).modal("show")},inspect:function(){r["a"].$emit("do_inspect",["src",this.source._id])},onSourceChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null==t||this.source._id!=t?void 0:this.getSource()},getSource:function(){var t=this;o.a.get(o.a.defaults.baseURL+"/source/"+this.source._id).then(function(e){t.source_from_api=e.data.result}).catch(function(t){console.log("Error getting sources information: "+t)})}}},l=c,d=(a("2e2b"),a("0c7c")),u=Object(d["a"])(l,i,s,!1,null,null,null);e["a"]=u.exports},de0c:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui basic inspect modal",attrs:{id:"inspect-"+t._id}},[a("div",{staticClass:"ui icon"},[a("i",{staticClass:"large unhide icon"}),a("h3",[t._v("Inspect data: "+t._s(t._id))])]),a("div",{staticClass:"ui fluid grid"},[a("div",{staticClass:"four wide column"}),t._m(0),t._m(1),t._m(2),a("div",{staticClass:"two wide column"}),a("div",{staticClass:"four wide column"}),t._m(3),a("div",{staticClass:"sixteen wide column"},[a("div",{staticClass:"ui fluid grid"},[t._m(4),a("div",{staticClass:"twelve wide column"},[t._m(5),t.$parent.$parent.limit_error?a("div",{staticClass:"ui negative message"},[a("p",[t._v(t._s(t.$parent.$parent.limit_error))])]):t._e()])]),a("div",{staticClass:"ui fluid grid"},[t._m(6),a("div",{staticClass:"twelve wide column"},[t._m(7),t.$parent.$parent.sample_error?a("div",{staticClass:"ui negative message"},[a("p",[t._v(t._s(t.$parent.$parent.sample_error))])]):t._e()])])]),a("div",{staticClass:"two wide column"})]),t._m(8)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"twelve wide column"},[a("p",[a("i",[t._v("Selecting more than one mode won't affect much the performance, running time will roughly be the same.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"four wide column"},[a("select",{staticClass:"ui dropdown",attrs:{id:"select-mode",multiple:""}},[a("option",{attrs:{value:"mapping",selected:""}},[t._v("mapping")]),a("option",{attrs:{value:"type"}},[t._v("type")]),a("option",{attrs:{value:"stats"}},[t._v("stats (experimental)")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ten wide column"},[a("div",{staticClass:"ui inverted list"},[a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[t._v("mapping")]),a("div",{staticClass:"description"},[t._v("Analyzes data so the inspection results can be converted into an ElasticSearch mapping (used during indexing step)")])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[t._v("type")]),a("div",{staticClass:"description"},[t._v("Builds a map of all types involved in the data, providing a summary of its structure")])])]),a("a",{staticClass:"item"},[a("i",{staticClass:"right triangle icon"}),a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[t._v("stats")]),a("div",{staticClass:"description"},[t._v("Performs in-depth analysis about the data, including type map and basic statistics, showing how volumetry fits over data structure")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"twelve wide column"},[a("p",[a("i",[t._v("Optional parameters")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui inverted input"},[a("input",{attrs:{type:"text",id:"limit",placeholder:"Limit..."}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui inverted list"},[a("a",{staticClass:"item"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[t._v("Limit")]),a("div",{staticClass:"description"},[t._v("Restrict inspection to this number of documents. If empty, all documents are inspected.")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"four wide column"},[a("div",{staticClass:"ui inverted input"},[a("input",{attrs:{type:"text",id:"sample",placeholder:"Sampling (eg. 0.5)..."}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ui inverted list"},[a("a",{staticClass:"item"},[a("div",{staticClass:"content"},[a("div",{staticClass:"header"},[t._v("Sampling data")]),a("div",{staticClass:"description"},[t._v('Randomly pick documents to inspect. Value is a float between 0 and 1.0. If sampling is 1.0, all documents are\n                                    picked, if 0.0, none of them. Combined with parameter "limit", it allows to randomly inspect a subset of the data.\n                                ')])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actions"},[a("div",{staticClass:"ui red basic cancel inverted button"},[a("i",{staticClass:"remove icon"}),t._v("\n            Cancel\n        ")]),a("div",{staticClass:"ui green ok inverted button"},[a("i",{staticClass:"checkmark icon"}),t._v("\n            OK\n        ")])])}],n=(a("7514"),a("bc3a")),o=a.n(n),r=a("f5ef"),c={name:"inspect-form",props:["_id"],mounted:function(){$("select.dropdown").dropdown()},created:function(){r["a"].$on("do_inspect",this.inspect)},beforeDestroy:function(){r["a"].$off("do_inspect",this.inspect),$("#inspect-".concat(this._id,".ui.basic.inspect.modal")).remove()},data:function(){return{limit_error:null,sample_error:null}},methods:{inspect:function(t){if("string"==typeof t)var e=t;else e=t[1];var a=this;$("#inspect-".concat(e,".ui.basic.inspect.modal")).modal("setting",{onApprove:function(){var i=$("#inspect-".concat(e)).find("#select-mode").val(),s=$("#inspect-".concat(e)).find("#limit").val(),n=$("#inspect-".concat(e)).find("#sample").val(),r={data_provider:t,mode:i};if(s){var c=parseInt(s);if(!c)return a.limit_error='"'.concat(s,'" is not an integer'),!1;r["limit"]=c}if(n){var l=parseFloat(n);if(!l)return a.sample_error=0==l?"Sample must be greater than zero...":'"'.concat(n,'" is not a float'),!1;r["sample"]=l}o.a.put(o.a.defaults.baseURL+"/inspect",r).then(function(t){console.log(t.data.result)}).catch(function(t){console.log("Error getting job manager information: "+t)})}}).modal("show")}}},l=c,d=a("0c7c"),u=Object(d["a"])(l,i,s,!1,null,null,null);e["a"]=u.exports},de8f:function(t,e,a){"use strict";var i=a("e1a2"),s=a.n(i);s.a},e0a0:function(t,e,a){},e1a2:function(t,e,a){},e46a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"ui small very compact grey table"},[t._m(0),t.build._meta?a("tbody",t._l(t.build._meta.stats,function(e,i){return a("tr",[a("td",[t._v(t._s(i))]),a("td",[t._v(t._s(t._f("currency")(e,"",0)))])])}),0):a("tfoot",[t._m(1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Stats")]),a("th",[t._v("Count")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("No data")]),a("th")])}],n=(a("bc3a"),a("f5ef"),{name:"build-stats",props:["build"],mounted:function(){},beforeDestroy:function(){},components:{},methods:{}}),o=n,r=a("0c7c"),c=Object(r["a"])(o,i,s,!1,null,"0dab9eeb",null);e["a"]=c.exports},eb25:function(t,e,a){},ed20:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"mini circular ui icon events button"},[a("i",{staticClass:"bullhorn icon"}),a("a",{class:["ui mini",t.notifnumcolor,"circular label"]},[t._v(t._s(t.events.length))])]),a("div",{staticClass:"ui messages popup top left transition hidden"},[t.events.length>0?a("div",{staticClass:"ui messages list",attrs:{id:"messages"}},[a("div",{staticClass:"ui fluid right aligned container"},[a("button",{staticClass:"mini ui button ",on:{click:function(e){return t.clearEvents()}}},[t._v("\n                Clear\n            ")])]),t._l(t.events,function(t){return a("div",{key:t._id,staticClass:"item event"},[a("event-message",{attrs:{event:t}})],1)})],2):a("div",{attrs:{nowrap:""}},[t._v("No new notifications")])])])},s=[],n=(a("7f7f"),a("7514"),a("bc3a"),a("f5ef")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ui tiny",t.color,"message"]},[a("i",{staticClass:"close icon",attrs:{"data-id":t.event._id}}),a("div",[a("div",{class:["ui",t.color,"horizontal label"]},[t._v(t._s(t.event.name))])]),a("div",[t._v(t._s(t.event.msg)),a("div",{staticClass:"ui right floated"},[a("i",[t._v(t._s(t.event.asctime))])])])])},r=[],c={name:"event-message",props:["event"],mounted:function(){console.log("EventMessage mounted");var t=this;$(".message .close").on("click",function(){var e=$(this).attr("data-id");e==t.event._id&&($(this).closest(".message").transition("fade"),console.log(e),n["a"].$emit("event_deleted",e))})},updated:function(){},created:function(){},beforeDestroy:function(){},watch:{},computed:{color:function(){switch(this.event.level.toUpperCase()){case"CRITICAL":return"violet";case"ERROR":return"red";case"WARNING":return"orange";case"INFO":return"green";case"DEBUG":return"blue";default:return console.log("onela"),"black"}}},data:function(){return{}},components:{},methods:{}},l=c,d=a("0c7c"),u=Object(d["a"])(l,o,r,!1,null,null,null),_=u.exports,p=10,m={name:"event-messages",mounted:function(){var t=this;console.log("EventMessages mounted"),$(".events.button").popup({popup:$(".events.popup"),on:"click",onVisible:function(){t.hasnew=!1},lastResort:"bottom right"})},components:{EventMessage:_},updated:function(){},created:function(){n["a"].$on("change_event",this.onEventChanged),n["a"].$on("event_deleted",this.eventDeleted)},beforeDestroy:function(){n["a"].$off("change_event",this.onEventChanged),n["a"].$off("event_deleted",this.eventDeleted)},watch:{},data:function(){return{events:[],hasnew:!1}},computed:{notifnumcolor:function(){if(this.hasnew)return"red"}},methods:{clearEvents:function(){this.events=[]},eventDeleted:function(t){var e=this.events.find(function(e){return e._id==t}),a=this.events.indexOf(e);a>-1&&this.events.splice(a,1)},onEventChanged:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!=t){if("CRITICAL"!=t.level&&"hub"==t.name)return;this.events.unshift(t),this.hasnew=!0;while(this.events.length>p)this.events.pop()}}}},f=m,v=(a("3e50"),Object(d["a"])(f,i,s,!1,null,null,null));e["a"]=v.exports},f1f5:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"ui small compact sortable celled table"},[t._m(0),t.ops&&t.ops.length?a("tbody",t._l(t.ops,function(e){return t.ops.length?a("tr",{staticClass:"top aligned"},[a("td",[t._v(t._s(e.op))]),a("td",[t._v(t._s(e.path))]),a("td",[t._v(t._s(e.value))])]):t._e()}),0):a("tr",[a("td",{attrs:{colspan:"3"}},[t._v("No diff results, data are the same")])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Operation")]),a("th",[t._v("Path")]),a("th",[t._v("Value")])])])}],n=(a("bc3a"),a("f5ef")),o=(a("3a8c"),{name:"json-diff-results",mounted:function(){console.log("JsonDiffResults mounted"),$("table").tablesort()},created:function(){n["a"].$on("diffed",this.setOps)},beforeDestroy:function(){n["a"].$off("diffed",this.setOps)},data:function(){return{ops:null}},components:{},methods:{setOps:function(t){this.ops=t}}}),r=o,c=(a("1792"),a("0c7c")),l=Object(c["a"])(r,i,s,!1,null,null,null);e["a"]=l.exports},f5ef:function(t,e,a){"use strict";var i=a("2b0e");e["a"]=new i["a"]},f731:function(t,e,a){},fa28:function(t,e,a){"use strict";var i=a("b6a7"),s=a.n(i);s.a},feaa:function(t,e,a){}});
//# sourceMappingURL=app.2b836ae9.js.map